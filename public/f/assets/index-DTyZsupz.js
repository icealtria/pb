var Vn=Object.defineProperty;var Xn=(t,e,n)=>e in t?Vn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>Xn(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var De,D,nn,ae,vt,rn,on,sn,ht,Qe,et,Ae={},cn=[],Gn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ze=Array.isArray;function re(t,e){for(var n in e)t[n]=e[n];return t}function dt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function qn(t,e,n){var r,s,o,i={};for(o in e)o=="key"?r=e[o]:o=="ref"?s=e[o]:i[o]=e[o];if(arguments.length>2&&(i.children=arguments.length>3?De.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)i[o]==null&&(i[o]=t.defaultProps[o]);return Se(t,i,r,s,null)}function Se(t,e,n,r,s){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++nn,__i:-1,__u:0};return s==null&&D.vnode!=null&&D.vnode(o),o}function je(t){return t.children}function Ie(t,e){this.props=t,this.context=e}function ge(t,e){if(e==null)return t.__?ge(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ge(t):null}function an(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return an(t)}}function Et(t){(!t.__d&&(t.__d=!0)&&ae.push(t)&&!He.__r++||vt!=D.debounceRendering)&&((vt=D.debounceRendering)||rn)(He)}function He(){for(var t,e,n,r,s,o,i,c=1;ae.length;)ae.length>c&&ae.sort(on),t=ae.shift(),c=ae.length,t.__d&&(n=void 0,s=(r=(e=t).__v).__e,o=[],i=[],e.__P&&((n=re({},r)).__v=r.__v+1,D.vnode&&D.vnode(n),_t(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,o,s??ge(r),!!(32&r.__u),i),n.__v=r.__v,n.__.__k[n.__i]=n,un(o,n,i),n.__e!=s&&an(n)));He.__r=0}function fn(t,e,n,r,s,o,i,c,f,l,u){var a,h,d,_,p,b,w=r&&r.__k||cn,y=e.length;for(f=Yn(n,e,w,f,y),a=0;a<y;a++)(d=n.__k[a])!=null&&(h=d.__i==-1?Ae:w[d.__i]||Ae,d.__i=a,b=_t(t,d,h,s,o,i,c,f,l,u),_=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&pt(h.ref,null,d),u.push(d.ref,d.__c||_,d)),p==null&&_!=null&&(p=_),4&d.__u||h.__k===d.__k?f=ln(d,f,t):typeof d.type=="function"&&b!==void 0?f=b:_&&(f=_.nextSibling),d.__u&=-7);return n.__e=p,f}function Yn(t,e,n,r,s){var o,i,c,f,l,u=n.length,a=u,h=0;for(t.__k=new Array(s),o=0;o<s;o++)(i=e[o])!=null&&typeof i!="boolean"&&typeof i!="function"?(f=o+h,(i=t.__k[o]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Se(null,i,null,null,null):ze(i)?Se(je,{children:i},null,null,null):i.constructor==null&&i.__b>0?Se(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,c=null,(l=i.__i=Zn(i,n,f,a))!=-1&&(a--,(c=n[l])&&(c.__u|=2)),c==null||c.__v==null?(l==-1&&(s>u?h--:s<u&&h++),typeof i.type!="function"&&(i.__u|=4)):l!=f&&(l==f-1?h--:l==f+1?h++:(l>f?h--:h++,i.__u|=4))):t.__k[o]=null;if(a)for(o=0;o<u;o++)(c=n[o])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=ge(c)),dn(c,c));return r}function ln(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=ln(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ge(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Zn(t,e,n,r){var s,o,i=t.key,c=t.type,f=e[n];if(f===null&&t.key==null||f&&i==f.key&&c==f.type&&(2&f.__u)==0)return n;if(r>(f!=null&&(2&f.__u)==0?1:0))for(s=n-1,o=n+1;s>=0||o<e.length;){if(s>=0){if((f=e[s])&&(2&f.__u)==0&&i==f.key&&c==f.type)return s;s--}if(o<e.length){if((f=e[o])&&(2&f.__u)==0&&i==f.key&&c==f.type)return o;o++}}return-1}function At(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Gn.test(e)?n:n+"px"}function Be(t,e,n,r,s){var o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||At(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||At(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(sn,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=ht,t.addEventListener(e,o?et:Qe,o)):t.removeEventListener(e,o?et:Qe,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ut(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=ht++;else if(e.t<n.u)return;return n(D.event?D.event(e):e)}}}function _t(t,e,n,r,s,o,i,c,f,l){var u,a,h,d,_,p,b,w,y,B,E,K,A,$,C,U,k,m=e.type;if(e.constructor!=null)return null;128&n.__u&&(f=!!(32&n.__u),o=[c=e.__e=n.__e]),(u=D.__b)&&u(e);e:if(typeof m=="function")try{if(w=e.props,y="prototype"in m&&m.prototype.render,B=(u=m.contextType)&&r[u.__c],E=u?B?B.props.value:u.__:r,n.__c?b=(a=e.__c=n.__c).__=a.__E:(y?e.__c=a=new m(w,E):(e.__c=a=new Ie(w,E),a.constructor=m,a.render=Qn),B&&B.sub(a),a.props=w,a.state||(a.state={}),a.context=E,a.__n=r,h=a.__d=!0,a.__h=[],a._sb=[]),y&&a.__s==null&&(a.__s=a.state),y&&m.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=re({},a.__s)),re(a.__s,m.getDerivedStateFromProps(w,a.__s))),d=a.props,_=a.state,a.__v=e,h)y&&m.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),y&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(y&&m.getDerivedStateFromProps==null&&w!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(w,E),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(w,a.__s,E)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(a.props=w,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(L){L&&(L.__=e)}),K=0;K<a._sb.length;K++)a.__h.push(a._sb[K]);a._sb=[],a.__h.length&&i.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(w,a.__s,E),y&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,_,p)})}if(a.context=E,a.props=w,a.__P=t,a.__e=!1,A=D.__r,$=0,y){for(a.state=a.__s,a.__d=!1,A&&A(e),u=a.render(a.props,a.state,a.context),C=0;C<a._sb.length;C++)a.__h.push(a._sb[C]);a._sb=[]}else do a.__d=!1,A&&A(e),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++$<25);a.state=a.__s,a.getChildContext!=null&&(r=re(re({},r),a.getChildContext())),y&&!h&&a.getSnapshotBeforeUpdate!=null&&(p=a.getSnapshotBeforeUpdate(d,_)),U=u,u!=null&&u.type===je&&u.key==null&&(U=hn(u.props.children)),c=fn(t,ze(U)?U:[U],e,n,r,s,o,i,c,f,l),a.base=e.__e,e.__u&=-161,a.__h.length&&i.push(a),b&&(a.__E=a.__=null)}catch(L){if(e.__v=null,f||o!=null)if(L.then){for(e.__u|=f?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,e.__e=c}else for(k=o.length;k--;)dt(o[k]);else e.__e=n.__e,e.__k=n.__k;D.__e(L,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=Jn(n.__e,e,n,r,s,o,i,f,l);return(u=D.diffed)&&u(e),128&e.__u?void 0:c}function un(t,e,n){for(var r=0;r<n.length;r++)pt(n[r],n[++r],n[++r]);D.__c&&D.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(o){o.call(s)})}catch(o){D.__e(o,s.__v)}})}function hn(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ze(t)?t.map(hn):re({},t)}function Jn(t,e,n,r,s,o,i,c,f){var l,u,a,h,d,_,p,b=n.props,w=e.props,y=e.type;if(y=="svg"?s="http://www.w3.org/2000/svg":y=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((d=o[l])&&"setAttribute"in d==!!y&&(y?d.localName==y:d.nodeType==3)){t=d,o[l]=null;break}}if(t==null){if(y==null)return document.createTextNode(w);t=document.createElementNS(s,y,w.is&&w),c&&(D.__m&&D.__m(e,o),c=!1),o=null}if(y==null)b===w||c&&t.data==w||(t.data=w);else{if(o=o&&De.call(t.childNodes),b=n.props||Ae,!c&&o!=null)for(b={},l=0;l<t.attributes.length;l++)b[(d=t.attributes[l]).name]=d.value;for(l in b)if(d=b[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=d;else if(!(l in w)){if(l=="value"&&"defaultValue"in w||l=="checked"&&"defaultChecked"in w)continue;Be(t,l,null,d,s)}}for(l in w)d=w[l],l=="children"?h=d:l=="dangerouslySetInnerHTML"?u=d:l=="value"?_=d:l=="checked"?p=d:c&&typeof d!="function"||b[l]===d||Be(t,l,d,b[l],s);if(u)c||a&&(u.__html==a.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(a&&(t.innerHTML=""),fn(e.type=="template"?t.content:t,ze(h)?h:[h],e,n,r,y=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,i,o?o[0]:n.__k&&ge(n,0),c,f),o!=null)for(l=o.length;l--;)dt(o[l]);c||(l="value",y=="progress"&&_==null?t.removeAttribute("value"):_!=null&&(_!==t[l]||y=="progress"&&!_||y=="option"&&_!=b[l])&&Be(t,l,_,b[l],s),l="checked",p!=null&&p!=t[l]&&Be(t,l,p,b[l],s))}return t}function pt(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){D.__e(s,n)}}function dn(t,e,n){var r,s;if(D.unmount&&D.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||pt(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){D.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&dn(r[s],e,n||typeof t.type!="function");n||dt(t.__e),t.__c=t.__=t.__e=void 0}function Qn(t,e,n){return this.constructor(t,n)}function er(t,e,n){var r,s,o,i;e==document&&(e=document.documentElement),D.__&&D.__(t,e),s=(r=!1)?null:e.__k,o=[],i=[],_t(e,t=e.__k=qn(je,null,[t]),s||Ae,Ae,e.namespaceURI,s?null:e.firstChild?De.call(e.childNodes):null,o,s?s.__e:e.firstChild,r,i),un(o,t,i)}De=cn.slice,D={__e:function(t,e,n,r){for(var s,o,i;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(t)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),i=s.__d),i)return s.__E=s}catch(c){t=c}throw t}},nn=0,Ie.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=re({},this.state),typeof t=="function"&&(t=t(re({},n),this.props)),t&&re(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Et(this))},Ie.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Et(this))},Ie.prototype.render=je,ae=[],rn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,on=function(t,e){return t.__v.__b-e.__v.__b},He.__r=0,sn=/(PointerCapture)$|Capture$/i,ht=0,Qe=Ut(!1),et=Ut(!0);var tr=0;function F(t,e,n,r,s,o){e||(e={});var i,c,f=e;if("ref"in f)for(c in f={},e)c=="ref"?i=e[c]:f[c]=e[c];var l={type:t,props:f,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--tr,__i:-1,__u:0,__source:s,__self:o};if(typeof t=="function"&&(i=t.defaultProps))for(c in i)f[c]===void 0&&(f[c]=i[c]);return D.vnode&&D.vnode(l),l}var Fe,z,Ve,kt,Me=0,_n=[],j=D,Bt=j.__b,Lt=j.__r,Ct=j.diffed,$t=j.__c,St=j.unmount,It=j.__;function pn(t,e){j.__h&&j.__h(z,t,Me||e),Me=0;var n=z.__H||(z.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Y(t){return Me=1,nr(yn,t)}function nr(t,e,n){var r=pn(Fe++,2);if(r.t=t,!r.__c&&(r.__=[yn(void 0,e),function(c){var f=r.__N?r.__N[0]:r.__[0],l=r.t(f,c);f!==l&&(r.__N=[l,r.__[1]],r.__c.setState({}))}],r.__c=z,!z.__f)){var s=function(c,f,l){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,c,f,l);var a=r.__c.props!==c;return u.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(a=!0)}}),o&&o.call(this,c,f,l)||a};z.__f=!0;var o=z.shouldComponentUpdate,i=z.componentWillUpdate;z.componentWillUpdate=function(c,f,l){if(this.__e){var u=o;o=void 0,s(c,f,l),o=u}i&&i.call(this,c,f,l)},z.shouldComponentUpdate=s}return r.__N||r.__}function rr(t,e){var n=pn(Fe++,7);return cr(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function or(t,e){return Me=8,rr(function(){return t},e)}function sr(){for(var t;t=_n.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ne),t.__H.__h.forEach(tt),t.__H.__h=[]}catch(e){t.__H.__h=[],j.__e(e,t.__v)}}j.__b=function(t){z=null,Bt&&Bt(t)},j.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),It&&It(t,e)},j.__r=function(t){Lt&&Lt(t),Fe=0;var e=(z=t.__c).__H;e&&(Ve===z?(e.__h=[],z.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Ne),e.__h.forEach(tt),e.__h=[],Fe=0)),Ve=z},j.diffed=function(t){Ct&&Ct(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(_n.push(e)!==1&&kt===j.requestAnimationFrame||((kt=j.requestAnimationFrame)||ir)(sr)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ve=z=null},j.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ne),n.__h=n.__h.filter(function(r){return!r.__||tt(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],j.__e(r,n.__v)}}),$t&&$t(t,e)},j.unmount=function(t){St&&St(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ne(r)}catch(s){e=s}}),n.__H=void 0,e&&j.__e(e,n.__v))};var Nt=typeof requestAnimationFrame=="function";function ir(t){var e,n=function(){clearTimeout(r),Nt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Nt&&(e=requestAnimationFrame(n))}function Ne(t){var e=z,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),z=e}function tt(t){var e=z;t.__c=t.__(),z=e}function cr(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function yn(t,e){return typeof e=="function"?e(t):e}function q(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ar(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yt(t,...e){if(!ar(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function We(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");q(t.outputLen),q(t.blockLen)}function Oe(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function fr(t,e){yt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const _e=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Pe(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function J(t,e){return t<<32-e|t>>>e}function M(t,e){return t<<e|t>>>32-e>>>0}const Pt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function lr(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Tt(t){for(let e=0;e<t.length;e++)t[e]=lr(t[e])}function ur(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function fe(t){return typeof t=="string"&&(t=ur(t)),yt(t),t}class gn{clone(){return this._cloneInto()}}function wn(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function hr(t){const e=r=>t().update(fe(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ue(t=32){if(_e&&typeof _e.getRandomValues=="function")return _e.getRandomValues(new Uint8Array(t));if(_e&&typeof _e.randomBytes=="function")return _e.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}class bn extends gn{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,We(e);const r=fe(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return Oe(this),this.iHash.update(e),this}digestInto(e){Oe(this),yt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const me=(t,e,n)=>new bn(t,e).update(n).digest();me.create=(t,e)=>new bn(t,e);function dr(t,e,n){return We(t),n===void 0&&(n=new Uint8Array(t.outputLen)),me(t,fe(n),fe(e))}const Ge=new Uint8Array([0]),Ht=new Uint8Array;function _r(t,e,n,r=32){if(We(t),q(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=Ht);const o=new Uint8Array(s*t.outputLen),i=me.create(t,e),c=i._cloneInto(),f=new Uint8Array(i.outputLen);for(let l=0;l<s;l++)Ge[0]=l+1,c.update(l===0?Ht:f).update(n).update(Ge).digestInto(f),o.set(f,t.outputLen*l),i._cloneInto(c);return i.destroy(),c.destroy(),f.fill(0),Ge.fill(0),o.slice(0,r)}const we=(t,e,n,r,s)=>_r(t,dr(t,e,n),r,s);function pr(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),f=r?4:0,l=r?0:4;t.setUint32(e+f,i,r),t.setUint32(e+l,c,r)}function yr(t,e,n){return t&e^~t&n}function gr(t,e,n){return t&e^t&n^e&n}class wr extends gn{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Pe(this.buffer)}update(e){Oe(this);const{view:n,buffer:r,blockLen:s}=this;e=fe(e);const o=e.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const f=Pe(e);for(;s<=o-i;i+=s)this.process(f,i);continue}r.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oe(this),fr(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let a=i;a<s;a++)n[a]=0;pr(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=Pe(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=f/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let a=0;a<l;a++)c.setUint32(4*a,u[a],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return e.length=s,e.pos=c,e.finished=o,e.destroyed=i,s%n&&e.buffer.set(r),e}}const br=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),oe=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),se=new Uint32Array(64);class xr extends wr{constructor(){super(64,32,8,!1),this.A=oe[0]|0,this.B=oe[1]|0,this.C=oe[2]|0,this.D=oe[3]|0,this.E=oe[4]|0,this.F=oe[5]|0,this.G=oe[6]|0,this.H=oe[7]|0}get(){const{A:e,B:n,C:r,D:s,E:o,F:i,G:c,H:f}=this;return[e,n,r,s,o,i,c,f]}set(e,n,r,s,o,i,c,f){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=f|0}process(e,n){for(let a=0;a<16;a++,n+=4)se[a]=e.getUint32(n,!1);for(let a=16;a<64;a++){const h=se[a-15],d=se[a-2],_=J(h,7)^J(h,18)^h>>>3,p=J(d,17)^J(d,19)^d>>>10;se[a]=p+se[a-7]+_+se[a-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:f,G:l,H:u}=this;for(let a=0;a<64;a++){const h=J(c,6)^J(c,11)^J(c,25),d=u+h+yr(c,f,l)+br[a]+se[a]|0,p=(J(r,2)^J(r,13)^J(r,22))+gr(r,s,o)|0;u=l,l=f,f=c,c=i+d|0,i=o,o=s,s=r,r=d+p|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,f=f+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(r,s,o,i,c,f,l,u)}roundClean(){se.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Q=hr(()=>new xr);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function xn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function mn(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function mr(t){if(typeof t!="function")throw new Error("function expected");return!0}function ke(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function vn(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function nt(t){if(!Array.isArray(t))throw new Error("array expected")}function En(t,e){if(!mn(!0,e))throw new Error(`${t}: array of strings expected`)}function An(t,e){if(!mn(!1,e))throw new Error(`${t}: array of numbers expected`)}function Un(...t){const e=o=>o,n=(o,i)=>c=>o(i(c)),r=t.map(o=>o.encode).reduceRight(n,e),s=t.map(o=>o.decode).reduce(n,e);return{encode:r,decode:s}}function kn(t){const e=typeof t=="string"?t.split(""):t,n=e.length;En("alphabet",e);const r=new Map(e.map((s,o)=>[s,o]));return{encode:s=>(nt(s),s.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${t}`);return e[o]})),decode:s=>(nt(s),s.map(o=>{ke("alphabet.decode",o);const i=r.get(o);if(i===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${t}`);return i}))}}function Bn(t=""){return ke("join",t),{encode:e=>(En("join.decode",e),e.join(t)),decode:e=>(ke("join.decode",e),e.split(t))}}const Ln=(t,e)=>e===0?t:Ln(e,t%e),Ke=(t,e)=>t+(e-Ln(t,e)),Te=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function rt(t,e,n,r){if(nt(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ke(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Ke(e,n)}`);let s=0,o=0;const i=Te[e],c=Te[n]-1,f=[];for(const l of t){if(vn(l),l>=i)throw new Error(`convertRadix2: invalid data word=${l} from=${e}`);if(s=s<<e|l,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)f.push((s>>o-n&c)>>>0);const u=Te[o];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-o&c,!r&&o>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&o>0&&f.push(s>>>0),f}function Cn(t,e=!1){if(vn(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Ke(8,t)>32||Ke(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!xn(n))throw new Error("radix2.encode input should be Uint8Array");return rt(Array.from(n),8,t,!e)},decode:n=>(An("radix2.decode",n),Uint8Array.from(rt(n,t,8,e)))}}function Ft(t){return mr(t),function(...e){try{return t.apply(null,e)}catch{}}}const ce=Un(Cn(6),kn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Bn("")),ot=Un(kn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Bn("")),Mt=[996825010,642813549,513874426,1027748829,705979059];function ve(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<Mt.length;r++)(e>>r&1)===1&&(n^=Mt[r]);return n}function Ot(t,e,n=1){const r=t.length;let s=1;for(let o=0;o<r;o++){const i=t.charCodeAt(o);if(i<33||i>126)throw new Error(`Invalid prefix (${t})`);s=ve(s)^i>>5}s=ve(s);for(let o=0;o<r;o++)s=ve(s)^t.charCodeAt(o)&31;for(let o of e)s=ve(s)^o;for(let o=0;o<6;o++)s=ve(s);return s^=n,ot.encode(rt([s%Te[30]],30,5,!1))}function vr(t){const e=t==="bech32"?1:734539939,n=Cn(5),r=n.decode,s=n.encode,o=Ft(r);function i(a,h,d=90){ke("bech32.encode prefix",a),xn(h)&&(h=Array.from(h)),An("bech32.encode",h);const _=a.length;if(_===0)throw new TypeError(`Invalid prefix length ${_}`);const p=_+7+h.length;if(d!==!1&&p>d)throw new TypeError(`Length ${p} exceeds limit ${d}`);const b=a.toLowerCase(),w=Ot(b,h,e);return`${b}1${ot.encode(h)}${w}`}function c(a,h=90){ke("bech32.decode input",a);const d=a.length;if(d<8||h!==!1&&d>h)throw new TypeError(`invalid string length: ${d} (${a}). Expected (8..${h})`);const _=a.toLowerCase();if(a!==_&&a!==a.toUpperCase())throw new Error("String must be lowercase or uppercase");const p=_.lastIndexOf("1");if(p===0||p===-1)throw new Error('Letter "1" must be present between prefix and data only');const b=_.slice(0,p),w=_.slice(p+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");const y=ot.decode(w).slice(0,-6),B=Ot(b,y,e);if(!w.endsWith(B))throw new Error(`Invalid checksum in ${a}: expected "${B}"`);return{prefix:b,words:y}}const f=Ft(c);function l(a){const{prefix:h,words:d}=c(a,!1);return{prefix:h,words:d,bytes:r(d)}}function u(a,h){return i(a,s(h))}return{encode:i,decode:c,encodeFromBytes:u,decodeToBytes:l,decodeUnsafe:f,fromWords:r,fromWordsUnsafe:o,toWords:s}}const $n=vr("bech32");function Er(t,e,n,r){We(t);const s=wn({dkLen:32,asyncTick:10},r),{c:o,dkLen:i,asyncTick:c}=s;if(q(o),q(i),q(c),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const f=fe(e),l=fe(n),u=new Uint8Array(i),a=me.create(t,f),h=a._cloneInto().update(l);return{c:o,dkLen:i,asyncTick:c,DK:u,PRF:a,PRFSalt:h}}function Ar(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function Sn(t,e,n,r){const{c:s,dkLen:o,DK:i,PRF:c,PRFSalt:f}=Er(t,e,n,r);let l;const u=new Uint8Array(4),a=Pe(u),h=new Uint8Array(c.outputLen);for(let d=1,_=0;_<o;d++,_+=c.outputLen){const p=i.subarray(_,_+c.outputLen);a.setInt32(0,d,!1),(l=f._cloneInto(l)).update(u).digestInto(h),p.set(h.subarray(0,p.length));for(let b=1;b<s;b++){c._cloneInto(l).update(h).digestInto(h);for(let w=0;w<p.length;w++)p[w]^=h[w]}}return Ar(c,f,i,l,h)}function Kt(t,e,n,r,s,o){let i=t[e++]^n[r++],c=t[e++]^n[r++],f=t[e++]^n[r++],l=t[e++]^n[r++],u=t[e++]^n[r++],a=t[e++]^n[r++],h=t[e++]^n[r++],d=t[e++]^n[r++],_=t[e++]^n[r++],p=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],y=t[e++]^n[r++],B=t[e++]^n[r++],E=t[e++]^n[r++],K=t[e++]^n[r++],A=i,$=c,C=f,U=l,k=u,m=a,L=h,I=d,T=_,N=p,P=b,g=w,v=y,x=B,S=E,H=K;for(let R=0;R<8;R+=2)k^=M(A+v|0,7),T^=M(k+A|0,9),v^=M(T+k|0,13),A^=M(v+T|0,18),N^=M(m+$|0,7),x^=M(N+m|0,9),$^=M(x+N|0,13),m^=M($+x|0,18),S^=M(P+L|0,7),C^=M(S+P|0,9),L^=M(C+S|0,13),P^=M(L+C|0,18),U^=M(H+g|0,7),I^=M(U+H|0,9),g^=M(I+U|0,13),H^=M(g+I|0,18),$^=M(A+U|0,7),C^=M($+A|0,9),U^=M(C+$|0,13),A^=M(U+C|0,18),L^=M(m+k|0,7),I^=M(L+m|0,9),k^=M(I+L|0,13),m^=M(k+I|0,18),g^=M(P+N|0,7),T^=M(g+P|0,9),N^=M(T+g|0,13),P^=M(N+T|0,18),v^=M(H+S|0,7),x^=M(v+H|0,9),S^=M(x+v|0,13),H^=M(S+x|0,18);s[o++]=i+A|0,s[o++]=c+$|0,s[o++]=f+C|0,s[o++]=l+U|0,s[o++]=u+k|0,s[o++]=a+m|0,s[o++]=h+L|0,s[o++]=d+I|0,s[o++]=_+T|0,s[o++]=p+N|0,s[o++]=b+P|0,s[o++]=w+g|0,s[o++]=y+v|0,s[o++]=B+x|0,s[o++]=E+S|0,s[o++]=K+H|0}function qe(t,e,n,r,s){let o=r+0,i=r+16*s;for(let c=0;c<16;c++)n[i+c]=t[e+(2*s-1)*16+c];for(let c=0;c<s;c++,o+=16,e+=16)Kt(n,i,t,e,n,o),c>0&&(i+=16),Kt(n,o,t,e+=16,n,i)}function Ur(t,e,n){const r=wn({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:s,r:o,p:i,dkLen:c,asyncTick:f,maxmem:l,onProgress:u}=r;if(q(s),q(o),q(i),q(c),q(f),q(l),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const a=128*o,h=a/4;if(s<=1||(s&s-1)!==0||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(i<0||i>(2**32-1)*32/a)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(a*(s+i)>l)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+l);const _=Sn(Q,t,e,{c:1,dkLen:a*i}),p=Xe(_),b=Xe(new Uint8Array(a*s)),w=Xe(new Uint8Array(a));let y=()=>{};if(u){const B=2*s*i,E=Math.max(Math.floor(B/1e4),1);let K=0;y=()=>{K++,u&&(!(K%E)||K===B)&&u(K/B)}}return{N:s,r:o,p:i,dkLen:c,blockSize32:h,V:b,B32:p,B:_,tmp:w,blockMixCb:y,asyncTick:f}}function kr(t,e,n,r,s){const o=Sn(Q,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),s.fill(0),o}function In(t,e,n){const{N:r,r:s,p:o,dkLen:i,blockSize32:c,V:f,B32:l,B:u,tmp:a,blockMixCb:h}=Ur(t,e,n);Pt||Tt(l);for(let d=0;d<o;d++){const _=c*d;for(let p=0;p<c;p++)f[p]=l[_+p];for(let p=0,b=0;p<r-1;p++)qe(f,b,f,b+=c,s),h();qe(f,(r-1)*c,l,_,s),h();for(let p=0;p<r;p++){const b=l[_+c-16]%r;for(let w=0;w<c;w++)a[w]=l[_+w]^f[b*c+w];qe(a,0,l,_,s),h()}}return Pt||Tt(l),kr(t,i,u,f,a)}function Ye(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Nn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function X(t,...e){if(!Nn(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Rt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Br(t,e){X(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Dt(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const ie=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),Lr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Cr=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Cr)throw new Error("Non little-endian hardware is not supported");function $r(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function st(t){if(typeof t=="string")t=$r(t);else if(Nn(t))t=it(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Sr(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Ir(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const Nr=(t,e)=>{function n(r,...s){if(X(r),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?X(u):X(u,t.nonceLength)}const o=t.tagLength;o&&s[1]!==void 0&&X(s[1]);const i=e(r,...s),c=(u,a)=>{if(a!==void 0){if(u!==2)throw new Error("cipher output not supported");X(a)}};let f=!1;return{encrypt(u,a){if(f)throw new Error("cannot encrypt() twice with same key + nonce");return f=!0,X(u),c(i.encrypt.length,a),i.encrypt(u,a)},decrypt(u,a){if(X(u),o&&u.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(i.decrypt.length,a),i.decrypt(u,a)}}}return Object.assign(n,t),n};function zt(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Pr(e))throw new Error("invalid output, must be aligned");return e}function jt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),f=4,l=0;t.setUint32(e+f,i,r),t.setUint32(e+l,c,r)}function Pr(t){return t.byteOffset%4===0}function it(t){return Uint8Array.from(t)}function be(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Pn=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Tr=Pn("expand 16-byte k"),Hr=Pn("expand 32-byte k"),Fr=ie(Tr),Mr=ie(Hr);function O(t,e){return t<<e|t>>>32-e}function ct(t){return t.byteOffset%4===0}const Le=64,Or=16,Tn=2**32-1,Wt=new Uint32Array;function Kr(t,e,n,r,s,o,i,c){const f=s.length,l=new Uint8Array(Le),u=ie(l),a=ct(s)&&ct(o),h=a?ie(s):Wt,d=a?ie(o):Wt;for(let _=0;_<f;i++){if(t(e,n,r,u,i,c),i>=Tn)throw new Error("arx: counter overflow");const p=Math.min(Le,f-_);if(a&&p===Le){const b=_/4;if(_%4!==0)throw new Error("arx: invalid block position");for(let w=0,y;w<Or;w++)y=b+w,d[y]=h[y]^u[w];_+=Le;continue}for(let b=0,w;b<p;b++)w=_+b,o[w]=s[w]^l[b];_+=p}}function Rr(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:i}=Sr({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ye(s),Ye(i),Dt(o),Dt(n),(c,f,l,u,a=0)=>{X(c),X(f),X(l);const h=l.length;if(u===void 0&&(u=new Uint8Array(h)),X(u),Ye(a),a<0||a>=Tn)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const d=[];let _=c.length,p,b;if(_===32)d.push(p=it(c)),b=Mr;else if(_===16&&n)p=new Uint8Array(32),p.set(c),p.set(c,16),b=Fr,d.push(p);else throw new Error(`arx: invalid 32-byte key, got length=${_}`);ct(f)||d.push(f=it(f));const w=ie(p);if(r){if(f.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,w,ie(f.subarray(0,16)),w),f=f.subarray(16)}const y=16-s;if(y!==f.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(y!==12){const E=new Uint8Array(12);E.set(f,o?0:12-f.length),f=E,d.push(f)}const B=ie(f);return Kr(t,b,w,B,l,u,a,i),be(...d),u}}const W=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Dr{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=st(e),X(e,32);const n=W(e,0),r=W(e,2),s=W(e,4),o=W(e,6),i=W(e,8),c=W(e,10),f=W(e,12),l=W(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|c<<2)&8191,this.r[7]=(c>>>11|f<<5)&8065,this.r[8]=(f>>>8|l<<8)&8191,this.r[9]=l>>>5&127;for(let u=0;u<8;u++)this.pad[u]=W(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:o,r:i}=this,c=i[0],f=i[1],l=i[2],u=i[3],a=i[4],h=i[5],d=i[6],_=i[7],p=i[8],b=i[9],w=W(e,n+0),y=W(e,n+2),B=W(e,n+4),E=W(e,n+6),K=W(e,n+8),A=W(e,n+10),$=W(e,n+12),C=W(e,n+14);let U=o[0]+(w&8191),k=o[1]+((w>>>13|y<<3)&8191),m=o[2]+((y>>>10|B<<6)&8191),L=o[3]+((B>>>7|E<<9)&8191),I=o[4]+((E>>>4|K<<12)&8191),T=o[5]+(K>>>1&8191),N=o[6]+((K>>>14|A<<2)&8191),P=o[7]+((A>>>11|$<<5)&8191),g=o[8]+(($>>>8|C<<8)&8191),v=o[9]+(C>>>5|s),x=0,S=x+U*c+k*(5*b)+m*(5*p)+L*(5*_)+I*(5*d);x=S>>>13,S&=8191,S+=T*(5*h)+N*(5*a)+P*(5*u)+g*(5*l)+v*(5*f),x+=S>>>13,S&=8191;let H=x+U*f+k*c+m*(5*b)+L*(5*p)+I*(5*_);x=H>>>13,H&=8191,H+=T*(5*d)+N*(5*h)+P*(5*a)+g*(5*u)+v*(5*l),x+=H>>>13,H&=8191;let R=x+U*l+k*f+m*c+L*(5*b)+I*(5*p);x=R>>>13,R&=8191,R+=T*(5*_)+N*(5*d)+P*(5*h)+g*(5*a)+v*(5*u),x+=R>>>13,R&=8191;let G=x+U*u+k*l+m*f+L*c+I*(5*b);x=G>>>13,G&=8191,G+=T*(5*p)+N*(5*_)+P*(5*d)+g*(5*h)+v*(5*a),x+=G>>>13,G&=8191;let ee=x+U*a+k*u+m*l+L*f+I*c;x=ee>>>13,ee&=8191,ee+=T*(5*b)+N*(5*p)+P*(5*_)+g*(5*d)+v*(5*h),x+=ee>>>13,ee&=8191;let te=x+U*h+k*a+m*u+L*l+I*f;x=te>>>13,te&=8191,te+=T*c+N*(5*b)+P*(5*p)+g*(5*_)+v*(5*d),x+=te>>>13,te&=8191;let le=x+U*d+k*h+m*a+L*u+I*l;x=le>>>13,le&=8191,le+=T*f+N*c+P*(5*b)+g*(5*p)+v*(5*_),x+=le>>>13,le&=8191;let ue=x+U*_+k*d+m*h+L*a+I*u;x=ue>>>13,ue&=8191,ue+=T*l+N*f+P*c+g*(5*b)+v*(5*p),x+=ue>>>13,ue&=8191;let he=x+U*p+k*_+m*d+L*h+I*a;x=he>>>13,he&=8191,he+=T*u+N*l+P*f+g*c+v*(5*b),x+=he>>>13,he&=8191;let de=x+U*b+k*p+m*_+L*d+I*h;x=de>>>13,de&=8191,de+=T*a+N*u+P*l+g*f+v*c,x+=de>>>13,de&=8191,x=(x<<2)+x|0,x=x+S|0,S=x&8191,x=x>>>13,H+=x,o[0]=S,o[1]=H,o[2]=R,o[3]=G,o[4]=ee,o[5]=te,o[6]=le,o[7]=ue,o[8]=he,o[9]=de}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=s,s=e[c]>>>13,e[c]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+s,s=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(s^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let i=e[0]+n[0];e[0]=i&65535;for(let c=1;c<8;c++)i=(e[c]+n[c]|0)+(i>>>16)|0,e[c]=i&65535;be(r)}update(e){Rt(this);const{buffer:n,blockLen:r}=this;e=st(e);const s=e.length;for(let o=0;o<s;){const i=Math.min(r-this.pos,s-o);if(i===r){for(;r<=s-o;o+=r)this.process(e,o);continue}n.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){be(this.h,this.r,this.buffer,this.pad)}digestInto(e){Rt(this),Br(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)e[o++]=r[i]>>>0,e[o++]=r[i]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function zr(t){const e=(r,s)=>t(s).update(st(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const jr=zr(t=>new Dr(t));function Wr(t,e,n,r,s,o=20){let i=t[0],c=t[1],f=t[2],l=t[3],u=e[0],a=e[1],h=e[2],d=e[3],_=e[4],p=e[5],b=e[6],w=e[7],y=s,B=n[0],E=n[1],K=n[2],A=i,$=c,C=f,U=l,k=u,m=a,L=h,I=d,T=_,N=p,P=b,g=w,v=y,x=B,S=E,H=K;for(let G=0;G<o;G+=2)A=A+k|0,v=O(v^A,16),T=T+v|0,k=O(k^T,12),A=A+k|0,v=O(v^A,8),T=T+v|0,k=O(k^T,7),$=$+m|0,x=O(x^$,16),N=N+x|0,m=O(m^N,12),$=$+m|0,x=O(x^$,8),N=N+x|0,m=O(m^N,7),C=C+L|0,S=O(S^C,16),P=P+S|0,L=O(L^P,12),C=C+L|0,S=O(S^C,8),P=P+S|0,L=O(L^P,7),U=U+I|0,H=O(H^U,16),g=g+H|0,I=O(I^g,12),U=U+I|0,H=O(H^U,8),g=g+H|0,I=O(I^g,7),A=A+m|0,H=O(H^A,16),P=P+H|0,m=O(m^P,12),A=A+m|0,H=O(H^A,8),P=P+H|0,m=O(m^P,7),$=$+L|0,v=O(v^$,16),g=g+v|0,L=O(L^g,12),$=$+L|0,v=O(v^$,8),g=g+v|0,L=O(L^g,7),C=C+I|0,x=O(x^C,16),T=T+x|0,I=O(I^T,12),C=C+I|0,x=O(x^C,8),T=T+x|0,I=O(I^T,7),U=U+k|0,S=O(S^U,16),N=N+S|0,k=O(k^N,12),U=U+k|0,S=O(S^U,8),N=N+S|0,k=O(k^N,7);let R=0;r[R++]=i+A|0,r[R++]=c+$|0,r[R++]=f+C|0,r[R++]=l+U|0,r[R++]=u+k|0,r[R++]=a+m|0,r[R++]=h+L|0,r[R++]=d+I|0,r[R++]=_+T|0,r[R++]=p+N|0,r[R++]=b+P|0,r[R++]=w+g|0,r[R++]=y+v|0,r[R++]=B+x|0,r[R++]=E+S|0,r[R++]=K+H|0}const Vr=Rr(Wr,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Xr=new Uint8Array(16),Vt=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Xr.subarray(n))},Gr=new Uint8Array(32);function Xt(t,e,n,r,s){const o=t(e,n,Gr),i=jr.create(o);s&&Vt(i,s),Vt(i,r);const c=new Uint8Array(16),f=Lr(c);jt(f,0,BigInt(s?s.length:0),!0),jt(f,8,BigInt(r.length),!0),i.update(c);const l=i.digest();return be(o,c),l}const qr=t=>(e,n,r)=>({encrypt(o,i){const c=o.length;i=zt(c+16,i,!1),i.set(o);const f=i.subarray(0,-16);t(e,n,f,f,1);const l=Xt(t,e,n,f,r);return i.set(l,c),be(l),i},decrypt(o,i){i=zt(o.length-16,i,!1);const c=o.subarray(0,-16),f=o.subarray(-16),l=Xt(t,e,n,c,r);if(!Ir(f,l))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),t(e,n,i,i,1),be(l),i}}),xe=Nr({blockSize:64,nonceLength:12,tagLength:16},qr(Vr));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Hn=BigInt(0);function gt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fn(t){if(!gt(t))throw new Error("Uint8Array expected")}const Yr=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Zr(t){Fn(t);let e="";for(let n=0;n<t.length;n++)e+=Yr[t[n]];return e}function Jr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Hn:BigInt("0x"+t)}const ne={_0:48,_9:57,A:65,F:70,a:97,f:102};function Gt(t){if(t>=ne._0&&t<=ne._9)return t-ne._0;if(t>=ne.A&&t<=ne.F)return t-(ne.A-10);if(t>=ne.a&&t<=ne.f)return t-(ne.a-10)}function Mn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Gt(t.charCodeAt(o)),c=Gt(t.charCodeAt(o+1));if(i===void 0||c===void 0){const f=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+o)}r[s]=i*16+c}return r}function qt(t){return Fn(t),Jr(Zr(Uint8Array.from(t).reverse()))}function Qr(t,e){return Mn(t.toString(16).padStart(e*2,"0"))}function eo(t,e){return Qr(t,e).reverse()}function Yt(t,e,n){let r;if(typeof e=="string")try{r=Mn(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(gt(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Ze=t=>typeof t=="bigint"&&Hn<=t;function to(t,e,n){return Ze(t)&&Ze(e)&&Ze(n)&&e<=t&&t<n}function Zt(t,e,n,r){if(!to(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}const no={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||gt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function ro(t,e,n={}){const r=(s,o,i)=>{const c=no[o];if(typeof c!="function")throw new Error("invalid validator function");const f=t[s];if(!(i&&f===void 0)&&!c(f,t))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+f)};for(const[s,o]of Object.entries(e))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return t}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),Ce=BigInt(1);function On(t,e){const n=t%e;return n>=ye?n:e+n}function oo(t,e,n){if(e<ye)throw new Error("invalid exponent, negatives unsupported");if(n<=ye)throw new Error("invalid modulus");if(n===Ce)return ye;let r=Ce;for(;e>ye;)e&Ce&&(r=r*t%n),t=t*t%n,e>>=Ce;return r}function Z(t,e,n){let r=t;for(;e-- >ye;)r*=r,r%=n;return r}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),Je=BigInt(1);function so(t){return ro(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function io(t){const e=so(t),{P:n}=e,r=y=>On(y,n),s=e.montgomeryBits,o=Math.ceil(s/8),i=e.nByteLength,c=e.adjustScalarBytes||(y=>y),f=e.powPminus2||(y=>oo(y,n-BigInt(2),n));function l(y,B,E){const K=r(y*(B-E));return B=r(B-K),E=r(E+K),[B,E]}const u=(e.a-BigInt(2))/BigInt(4);function a(y,B){Zt("u",y,pe,n),Zt("scalar",B,pe,n);const E=B,K=y;let A=Je,$=pe,C=y,U=Je,k=pe,m;for(let I=BigInt(s-1);I>=pe;I--){const T=E>>I&Je;k^=T,m=l(k,A,C),A=m[0],C=m[1],m=l(k,$,U),$=m[0],U=m[1],k=T;const N=A+$,P=r(N*N),g=A-$,v=r(g*g),x=P-v,S=C+U,H=C-U,R=r(H*N),G=r(S*g),ee=R+G,te=R-G;C=r(ee*ee),U=r(K*r(te*te)),A=r(P*v),$=r(x*(P+r(u*x)))}m=l(k,A,C),A=m[0],C=m[1],m=l(k,$,U),$=m[0],U=m[1];const L=f($);return r(A*L)}function h(y){return eo(r(y),o)}function d(y){const B=Yt("u coordinate",y,o);return i===32&&(B[31]&=127),qt(B)}function _(y){const B=Yt("scalar",y),E=B.length;if(E!==o&&E!==i){let K=""+o+" or "+i;throw new Error("invalid scalar, expected "+K+" bytes, got "+E)}return qt(c(B))}function p(y,B){const E=d(B),K=_(y),A=a(E,K);if(A===pe)throw new Error("invalid private or public key received");return h(A)}const b=h(e.Gu);function w(y){return p(y,b)}return{scalarMult:p,scalarMultBase:w,getSharedSecret:(y,B)=>p(y,B),getPublicKey:y=>w(y),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const co=BigInt(1),Jt=BigInt(2),ao=BigInt(3),fo=BigInt(5);BigInt(8);function lo(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),o=at,c=t*t%o*t%o,f=Z(c,Jt,o)*c%o,l=Z(f,co,o)*t%o,u=Z(l,fo,o)*l%o,a=Z(u,e,o)*u%o,h=Z(a,n,o)*a%o,d=Z(h,r,o)*h%o,_=Z(d,s,o)*d%o,p=Z(_,s,o)*d%o,b=Z(p,e,o)*u%o;return{pow_p_5_8:Z(b,Jt,o)*t%o,b2:c}}function uo(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const Re=io({P:at,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=at,{pow_p_5_8:n,b2:r}=lo(t);return On(Z(n,ao,e)*r,e)},adjustScalarBytes:uo,randomBytes:Ue}),wt=!1;let Kn=!1;const Rn=(()=>{let t;return async()=>{if(t===void 0)try{await crypto.subtle.importKey("raw",Re.GuBytes,{name:"X25519"},wt,[]),t=!0}catch{t=!1}return t}})();async function bt(t,e){if(!await Rn()||Kn){if(lt(t))throw new Error("CryptoKey provided but X25519 WebCrypto is not supported");return Re.scalarMult(t,e)}let n;lt(t)?n=t:n=await _o(t);const r=await crypto.subtle.importKey("raw",e,{name:"X25519"},wt,[]);return new Uint8Array(await crypto.subtle.deriveBits({name:"X25519",public:r},n,256))}async function ft(t){if(!await Rn()||Kn){if(lt(t))throw new Error("CryptoKey provided but X25519 WebCrypto is not supported");return Re.scalarMultBase(t)}return bt(t,Re.GuBytes)}const ho=new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,110,4,34,4,32]);async function _o(t){if(t.length!==32)throw new Error("X25519 private key must be 32 bytes");const e=new Uint8Array([...ho,...t]);return crypto.subtle.importKey("pkcs8",e,{name:"X25519"},wt,["deriveBits"])}function lt(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}class xt{constructor(e,n){V(this,"args");V(this,"body");this.args=e,this.body=n}}class ut{constructor(e){V(this,"arr");this.arr=e}toString(e){return e.forEach(n=>{if(n<32||n>136)throw Error("invalid non-ASCII byte in header")}),new TextDecoder().decode(e)}readString(e){const n=this.arr.subarray(0,e);return this.arr=this.arr.subarray(e),this.toString(n)}readLine(){const e=this.arr.indexOf(10);if(e>=0){const n=this.arr.subarray(0,e);return this.arr=this.arr.subarray(e+1),this.toString(n)}return null}rest(){return this.arr}}function po(t){const e=new ut(t);if(e.readString(3)!=="-> ")throw Error("invalid stanza");const n=e.readLine();if(n===null)throw Error("invalid stanza");const r=n.split(" ");if(r.length<1)throw Error("invalid stanza");for(const i of r)if(i.length===0)throw Error("invalid stanza");const s=[];for(;;){const i=e.readLine();if(i===null)throw Error("invalid stanza");const c=ce.decode(i);if(c.length>48)throw Error("invalid stanza");if(s.push(c),c.length<48)break}const o=Dn(s);return[new xt(r,o),e.rest()]}function Dn(t){const e=t.reduce((s,o)=>s+o.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function yo(t){const e=new ut(t),n=e.readLine();if(n!=="age-encryption.org/v1")throw Error("invalid version "+(n??"line"));let r=e.rest();const s=[];for(;;){let o;[o,r]=po(r),s.push(o);const i=new ut(r);if(i.readString(4)==="--- "){const c=t.subarray(0,t.length-i.rest().length-1),f=i.readLine();if(f===null)throw Error("invalid header");const l=ce.decode(f);return{stanzas:s,headerNoMAC:c,MAC:l,rest:i.rest()}}}}function zn(t){const e=[];e.push(`age-encryption.org/v1
`);for(const n of t){e.push("-> "+n.args.join(" ")+`
`);for(let r=0;r<n.body.length;r+=48){let s=r+48;s>n.body.length&&(s=n.body.length),e.push(ce.encode(n.body.subarray(r,s))+`
`)}n.body.length%48===0&&e.push(`
`)}return e.push("---"),new TextEncoder().encode(e.join(""))}function go(t,e){return Dn([zn(t),new TextEncoder().encode(" "+ce.encode(e)+`
`)])}class wo{constructor(e){V(this,"recipient");const n=$n.decodeToBytes(e);if(!e.startsWith("age1")||n.prefix.toLowerCase()!=="age"||n.bytes.length!==32)throw Error("invalid recipient");this.recipient=n.bytes}async wrapFileKey(e){const n=Ue(32),r=await ft(n),s=await bt(n,this.recipient),o=new Uint8Array(r.length+this.recipient.length);o.set(r),o.set(this.recipient,r.length);const i=we(Q,s,o,"age-encryption.org/v1/X25519",32);return[new xt(["X25519",ce.encode(r)],jn(e,i))]}}class bo{constructor(e){V(this,"identity");V(this,"recipient");if(vo(e)){this.identity=e,this.recipient=ft(e);return}const n=$n.decodeToBytes(e);if(!e.startsWith("AGE-SECRET-KEY-1")||n.prefix.toUpperCase()!=="AGE-SECRET-KEY-"||n.bytes.length!==32)throw Error("invalid identity");this.identity=n.bytes,this.recipient=ft(n.bytes)}async unwrapFileKey(e){for(const n of e){if(n.args.length<1||n.args[0]!=="X25519")continue;if(n.args.length!==2)throw Error("invalid X25519 stanza");const r=ce.decode(n.args[1]);if(r.length!==32)throw Error("invalid X25519 stanza");const s=await bt(this.identity,r),o=await this.recipient,i=new Uint8Array(r.length+o.length);i.set(r),i.set(o,r.length);const c=we(Q,s,i,"age-encryption.org/v1/X25519",32),f=Wn(n.body,c);if(f!==null)return f}return null}}class xo{constructor(e,n){V(this,"passphrase");V(this,"logN");this.passphrase=e,this.logN=n}wrapFileKey(e){const n=Ue(16),r="age-encryption.org/v1/scrypt",s=new Uint8Array(r.length+16);s.set(new TextEncoder().encode(r)),s.set(n,r.length);const o=In(this.passphrase,s,{N:2**this.logN,r:8,p:1,dkLen:32});return[new xt(["scrypt",ce.encode(n),this.logN.toString()],jn(e,o))]}}class mo{constructor(e){V(this,"passphrase");this.passphrase=e}unwrapFileKey(e){for(const n of e){if(n.args.length<1||n.args[0]!=="scrypt")continue;if(e.length!==1)throw Error("scrypt recipient is not the only one in the header");if(n.args.length!==3||!/^[1-9][0-9]*$/.test(n.args[2]))throw Error("invalid scrypt stanza");const r=ce.decode(n.args[1]);if(r.length!==16)throw Error("invalid scrypt stanza");const s=Number(n.args[2]);if(s>20)throw Error("scrypt work factor is too high");const o="age-encryption.org/v1/scrypt",i=new Uint8Array(o.length+16);i.set(new TextEncoder().encode(o)),i.set(r,o.length);const c=In(this.passphrase,i,{N:2**s,r:8,p:1,dkLen:32}),f=Wn(n.body,c);if(f!==null)return f}return null}}function jn(t,e){const n=new Uint8Array(12);return xe(e,n).encrypt(t)}function Wn(t,e){if(t.length!==32)throw Error("invalid stanza");const n=new Uint8Array(12);try{return xe(e,n).decrypt(t)}catch{return null}}function vo(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}const mt=16,Ee=64*1024,$e=Ee+mt;function Eo(t,e){const n=new Uint8Array(12),r=()=>{for(let l=n.length-2;l>=0&&(n[l]++,n[l]===0);l--);},o=Math.ceil(e.length/$e)*mt,i=new Uint8Array(e.length-o);let c=i;for(;e.length>$e;){const l=xe(t,n).decrypt(e.subarray(0,$e));c.set(l),c=c.subarray(l.length),e=e.subarray($e),r()}n[11]=1;const f=xe(t,n).decrypt(e);if(c.set(f),f.length===0&&i.length!==0)throw Error("empty final chunk");if(c.length!==f.length)throw Error("stream: internal error: didn't fill expected plaintext buffer");return i}function Ao(t,e){const n=new Uint8Array(12),r=()=>{for(let l=n.length-2;l>=0&&(n[l]++,n[l]===0);l--);},o=(e.length===0?1:Math.ceil(e.length/Ee))*mt,i=new Uint8Array(e.length+o);let c=i;for(;e.length>Ee;){const l=xe(t,n).encrypt(e.subarray(0,Ee));c.set(l),c=c.subarray(l.length),e=e.subarray(Ee),r()}n[11]=1;const f=xe(t,n).encrypt(e);if(c.set(f),c.length!==f.length)throw Error("stream: internal error: didn't fill expected ciphertext buffer");return i}class Uo{constructor(){V(this,"passphrase",null);V(this,"scryptWorkFactor",18);V(this,"recipients",[])}setPassphrase(e){if(this.passphrase!==null)throw new Error("can encrypt to at most one passphrase");if(this.recipients.length!==0)throw new Error("can't encrypt to both recipients and passphrases");this.passphrase=e}setScryptWorkFactor(e){this.scryptWorkFactor=e}addRecipient(e){if(this.passphrase!==null)throw new Error("can't encrypt to both recipients and passphrases");typeof e=="string"?this.recipients.push(new wo(e)):this.recipients.push(e)}async encrypt(e){typeof e=="string"&&(e=new TextEncoder().encode(e));const n=Ue(16),r=[];let s=this.recipients;this.passphrase!==null&&(s=[new xo(this.passphrase,this.scryptWorkFactor)]);for(const h of s)r.push(...await h.wrapFileKey(n));const o=we(Q,n,void 0,"header",32),i=me(Q,o,zn(r)),c=go(r,i),f=Ue(16),l=we(Q,n,f,"payload",32),u=Ao(l,e),a=new Uint8Array(c.length+f.length+u.length);return a.set(c),a.set(f,c.length),a.set(u,c.length+f.length),a}}class ko{constructor(){V(this,"identities",[])}addPassphrase(e){this.identities.push(new mo(e))}addIdentity(e){typeof e=="string"||Lo(e)?this.identities.push(new bo(e)):this.identities.push(e)}async decrypt(e,n){const r=yo(e),s=await this.unwrapFileKey(r.stanzas);if(s===null)throw Error("no identity matched any of the file's recipients");const o=we(Q,s,void 0,"header",32),i=me(Q,o,r.headerNoMAC);if(!Bo(r.MAC,i))throw Error("invalid header HMAC");const c=r.rest.subarray(0,16),f=we(Q,s,c,"payload",32),l=r.rest.subarray(16),u=Eo(f,l);return n==="text"?new TextDecoder().decode(u):u}async unwrapFileKey(e){for(const n of this.identities){const r=await n.unwrapFileKey(e);if(r!==null)return r}return null}}function Bo(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function Lo(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}const Qt=async(t,e)=>{try{const n=new Uo;return n.setPassphrase(e),await n.encrypt(t)}catch{throw new Error("Encryption failed")}},Co=async(t,e)=>{try{const n=new Uint8Array(t),r=new ko;return r.addPassphrase(e),await r.decrypt(n,"text")}catch{throw new Error("Decryption failed")}},$o=t=>{const e=t.split(`
`),n=Object.fromEntries(e.map(r=>r.split(": ").map(s=>s.trim())).filter(r=>r.length===2));if(!n.url||!n.id||!n.sunset)throw new Error("Failed to parse server response. Unexpected format.");return n},en=async(t,e,n,r,s)=>{const o=new FormData;if(t){if(t.size>2*1024*1024)throw new Error("File size exceeds 2MB limit. Please choose a smaller file.");if(n&&r){const i=await t.arrayBuffer(),c=new TextDecoder().decode(i),f=await Qt(c,n);o.append("c",new Blob([f]))}else o.append("c",t)}else if(n&&r){const i=await Qt(e,n);o.append("c",new Blob([i]))}else o.append("c",e);return s&&o.append("sunset",s),o},So=()=>{const[t,e]=Y(""),[n,r]=Y("604800"),[s,o]=Y(null),[i,c]=Y(!1),[f,l]=Y(null),[u,a]=Y(""),[h,d]=Y(""),[_,p]=Y(null),[b,w]=Y(null),[y,B]=Y(""),[E,K]=Y(!1),A=()=>{l(null),o(null)},$=(g=!1)=>{A(),d(""),w(null),p(null),g&&(e(""),a(""))},C=async(g,v)=>{throw new Error(`Failed to ${v} paste (${g.status}): ${await g.text()||"Server Error"}`)},U=async()=>{if(!u)return l("Please enter a paste short code/URL part.");E&&c(!0),$();try{const g=`${window.location.origin}/${u}`,v=await fetch(g);if(!v.ok)throw new Error(`Failed to load paste (${v.status}): ${await v.text()||"Not Found or Server Error"}`);if(E){const x=await v.arrayBuffer(),S=await Co(x,y);e(S)}else{const x=await v.text();e(x)}w(g),o("Paste loaded successfully.")}catch(g){l(g.message),e("")}finally{E&&c(!1)}},k=async()=>{if(!h)return l("No Paste ID available for update. Load or create a paste first.");E&&c(!0),A();try{const g=await en(_,t,y,E),v=await fetch(`${window.location.origin}/${h}`,{method:"PUT",body:g});v.ok||await C(v,"update"),o(await v.text()||"Paste updated successfully."),p(null)}catch(g){l(g.message)}finally{E&&c(!1)}},m=async()=>{if(!h)return l("No Paste ID available for deletion.");if(confirm("Are you sure you want to delete this paste? This cannot be undone.")){A();try{const g=await fetch(`${window.location.origin}/${h}`,{method:"DELETE"});g.ok||await C(g,"delete"),o(await g.text()||"Paste deleted successfully."),$(!0)}catch(g){l(g.message)}}},L=async()=>{if(!_&&t.trim()==="")throw new Error("Content cannot be empty. Please type something or upload a file.");E&&c(!0),A();try{const g=await en(_,t,y,E,n),v=await fetch(window.location.origin.toString(),{method:"POST",body:g});v.ok||await C(v,"create");const x=$o(await v.text()),{url:S,id:H}=x;d(H),a(S.split("/").pop()||""),w(S),p(null),o(S?`Paste created successfully. URL: ${S}`:"Paste created successfully.")}catch(g){l(g.message)}finally{E&&c(!1)}},I=or(g=>{e(g.target.value),_&&p(null)},[_]);return F("div",{className:"pastebin-container",children:[F("header",{className:"pastebin-header",children:[F("div",{className:"header-section load-section",children:[F("input",{type:"text",value:u,onInput:g=>a(g.target.value),placeholder:"Paste short code to load",className:"header-input"}),F("button",{onClick:U,disabled:!u,className:"header-button",children:"Load"}),b&&F("button",{onClick:async()=>{if(b)try{await navigator.clipboard.writeText(b),o("URL copied to clipboard!")}catch{l("Failed to copy URL to clipboard")}},className:"header-button",children:"Copy URL"}),F("input",{type:"text",value:h,onInput:g=>d(g.target.value),placeholder:"Enter Paste ID",className:"header-input small-input",title:"Enter the Paste ID"})]}),F("div",{className:"header-section action-section",children:[F("button",{onClick:L,disabled:!t&&!_,className:"header-button primary-action",children:"Create"}),F("button",{onClick:k,disabled:!h,className:"header-button",children:"Update"}),F("button",{onClick:m,disabled:!h,className:"header-button danger-action",children:"Delete"})]}),F("div",{className:"header-section options-section",children:[F("label",{htmlFor:"sunset-select",children:"Expires in:"}),F("select",{id:"sunset-select",value:n,onChange:g=>r(g.target.value),className:"header-select",children:[F("option",{value:"3600",children:"1 hour"}),F("option",{value:"86400",children:"1 day"}),F("option",{value:"604800",children:"1 week"}),F("option",{value:"2592000",children:"1 month"})]}),F("input",{type:"file",id:"file-upload",onChange:g=>{var x;const v=((x=g.target.files)==null?void 0:x[0])||null;v!=null&&v.size&&v.size>2*1024*1024?(l("File size exceeds 2MB limit."),p(null),g.target.value=""):(p(v),e(""),A())},style:{display:"none"},accept:"*/*"}),F("button",{onClick:()=>{var g;return(g=document.getElementById("file-upload"))==null?void 0:g.click()},className:"header-button",children:_?`File: ${_.name}`:"Upload File (Max 2MB)"})]}),F("div",{className:"header-section encryption-section",children:[F("label",{children:[F("input",{type:"checkbox",checked:E,onChange:g=>K(g.target.checked)})," Encrypt"]}),E&&F("input",{type:"password",value:y,onChange:g=>B(g.target.value),placeholder:"Enter encryption password",className:"header-input"})]}),F("div",{className:"header-section status-section",children:[E&&i&&F("span",{className:"status loading",children:"Working..."}),f&&F("span",{className:"status error",children:["Error: ",f]}),s&&F("span",{className:"status success",children:s}),b&&!s&&F("span",{className:"status info",children:["Loaded: ",b," ",h?`(ID: ${h})`:"(ID unknown)"]})]})]}),F("main",{className:"pastebin-editor-area",children:F("textarea",{className:"pastebin-textarea",value:t,onInput:I,placeholder:"Enter your text here, or use 'Upload File'...",required:!_,spellcheck:!1})})]})};function Io(){return F(So,{})}const tn=document.getElementById("app");tn&&er(F(Io,{}),tn);
