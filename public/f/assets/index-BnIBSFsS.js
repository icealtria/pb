var jn=Object.defineProperty;var Wn=(t,e,n)=>e in t?jn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var q=(t,e,n)=>Wn(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Re,z,en,ue,vt,tn,nn,rn,ht,Qe,et,Ae={},on=[],Vn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ze=Array.isArray;function oe(t,e){for(var n in e)t[n]=e[n];return t}function dt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Xn(t,e,n){var r,s,o,i={};for(o in e)o=="key"?r=e[o]:o=="ref"?s=e[o]:i[o]=e[o];if(arguments.length>2&&(i.children=arguments.length>3?Re.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)i[o]==null&&(i[o]=t.defaultProps[o]);return $e(t,i,r,s,null)}function $e(t,e,n,r,s){var o={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++en,__i:-1,__u:0};return s==null&&z.vnode!=null&&z.vnode(o),o}function je(t){return t.children}function Ie(t,e){this.props=t,this.context=e}function ge(t,e){if(e==null)return t.__?ge(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ge(t):null}function sn(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return sn(t)}}function Et(t){(!t.__d&&(t.__d=!0)&&ue.push(t)&&!He.__r++||vt!=z.debounceRendering)&&((vt=z.debounceRendering)||tn)(He)}function He(){for(var t,e,n,r,s,o,i,c=1;ue.length;)ue.length>c&&ue.sort(nn),t=ue.shift(),c=ue.length,t.__d&&(n=void 0,s=(r=(e=t).__v).__e,o=[],i=[],e.__P&&((n=oe({},r)).__v=r.__v+1,z.vnode&&z.vnode(n),pt(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,o,s??ge(r),!!(32&r.__u),i),n.__v=r.__v,n.__.__k[n.__i]=n,ln(o,n,i),n.__e!=s&&sn(n)));He.__r=0}function cn(t,e,n,r,s,o,i,c,l,f,u){var a,h,d,p,y,b,w=r&&r.__k||on,g=e.length;for(l=Gn(n,e,w,l,g),a=0;a<g;a++)(d=n.__k[a])!=null&&(h=d.__i==-1?Ae:w[d.__i]||Ae,d.__i=a,b=pt(t,d,h,s,o,i,c,l,f,u),p=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&_t(h.ref,null,d),u.push(d.ref,d.__c||p,d)),y==null&&p!=null&&(y=p),4&d.__u||h.__k===d.__k?l=an(d,l,t):typeof d.type=="function"&&b!==void 0?l=b:p&&(l=p.nextSibling),d.__u&=-7);return n.__e=y,l}function Gn(t,e,n,r,s){var o,i,c,l,f,u=n.length,a=u,h=0;for(t.__k=new Array(s),o=0;o<s;o++)(i=e[o])!=null&&typeof i!="boolean"&&typeof i!="function"?(l=o+h,(i=t.__k[o]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?$e(null,i,null,null,null):ze(i)?$e(je,{children:i},null,null,null):i.constructor==null&&i.__b>0?$e(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=t,i.__b=t.__b+1,c=null,(f=i.__i=qn(i,n,l,a))!=-1&&(a--,(c=n[f])&&(c.__u|=2)),c==null||c.__v==null?(f==-1&&(s>u?h--:s<u&&h++),typeof i.type!="function"&&(i.__u|=4)):f!=l&&(f==l-1?h--:f==l+1?h++:(f>l?h--:h++,i.__u|=4))):t.__k[o]=null;if(a)for(o=0;o<u;o++)(c=n[o])!=null&&(2&c.__u)==0&&(c.__e==r&&(r=ge(c)),un(c,c));return r}function an(t,e,n){var r,s;if(typeof t.type=="function"){for(r=t.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=t,e=an(r[s],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ge(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function qn(t,e,n,r){var s,o,i=t.key,c=t.type,l=e[n];if(l===null&&t.key==null||l&&i==l.key&&c==l.type&&(2&l.__u)==0)return n;if(r>(l!=null&&(2&l.__u)==0?1:0))for(s=n-1,o=n+1;s>=0||o<e.length;){if(s>=0){if((l=e[s])&&(2&l.__u)==0&&i==l.key&&c==l.type)return s;s--}if(o<e.length){if((l=e[o])&&(2&l.__u)==0&&i==l.key&&c==l.type)return o;o++}}return-1}function At(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Vn.test(e)?n:n+"px"}function Be(t,e,n,r,s){var o;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||At(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||At(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(rn,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?r?n.u=r.u:(n.u=ht,t.addEventListener(e,o?et:Qe,o)):t.removeEventListener(e,o?et:Qe,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ut(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=ht++;else if(e.t<n.u)return;return n(z.event?z.event(e):e)}}}function pt(t,e,n,r,s,o,i,c,l,f){var u,a,h,d,p,y,b,w,g,k,L,R,E,S,C,A,U,v=e.type;if(e.constructor!=null)return null;128&n.__u&&(l=!!(32&n.__u),o=[c=e.__e=n.__e]),(u=z.__b)&&u(e);e:if(typeof v=="function")try{if(w=e.props,g="prototype"in v&&v.prototype.render,k=(u=v.contextType)&&r[u.__c],L=u?k?k.props.value:u.__:r,n.__c?b=(a=e.__c=n.__c).__=a.__E:(g?e.__c=a=new v(w,L):(e.__c=a=new Ie(w,L),a.constructor=v,a.render=Zn),k&&k.sub(a),a.props=w,a.state||(a.state={}),a.context=L,a.__n=r,h=a.__d=!0,a.__h=[],a._sb=[]),g&&a.__s==null&&(a.__s=a.state),g&&v.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=oe({},a.__s)),oe(a.__s,v.getDerivedStateFromProps(w,a.__s))),d=a.props,p=a.state,a.__v=e,h)g&&v.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),g&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(g&&v.getDerivedStateFromProps==null&&w!==d&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(w,L),!a.__e&&a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(w,a.__s,L)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(a.props=w,a.state=a.__s,a.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(B){B&&(B.__=e)}),R=0;R<a._sb.length;R++)a.__h.push(a._sb[R]);a._sb=[],a.__h.length&&i.push(a);break e}a.componentWillUpdate!=null&&a.componentWillUpdate(w,a.__s,L),g&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(d,p,y)})}if(a.context=L,a.props=w,a.__P=t,a.__e=!1,E=z.__r,S=0,g){for(a.state=a.__s,a.__d=!1,E&&E(e),u=a.render(a.props,a.state,a.context),C=0;C<a._sb.length;C++)a.__h.push(a._sb[C]);a._sb=[]}else do a.__d=!1,E&&E(e),u=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++S<25);a.state=a.__s,a.getChildContext!=null&&(r=oe(oe({},r),a.getChildContext())),g&&!h&&a.getSnapshotBeforeUpdate!=null&&(y=a.getSnapshotBeforeUpdate(d,p)),A=u,u!=null&&u.type===je&&u.key==null&&(A=fn(u.props.children)),c=cn(t,ze(A)?A:[A],e,n,r,s,o,i,c,l,f),a.base=e.__e,e.__u&=-161,a.__h.length&&i.push(a),b&&(a.__E=a.__=null)}catch(B){if(e.__v=null,l||o!=null)if(B.then){for(e.__u|=l?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;o[o.indexOf(c)]=null,e.__e=c}else for(U=o.length;U--;)dt(o[U]);else e.__e=n.__e,e.__k=n.__k;z.__e(B,e,n)}else o==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):c=e.__e=Yn(n.__e,e,n,r,s,o,i,l,f);return(u=z.diffed)&&u(e),128&e.__u?void 0:c}function ln(t,e,n){for(var r=0;r<n.length;r++)_t(n[r],n[++r],n[++r]);z.__c&&z.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(o){o.call(s)})}catch(o){z.__e(o,s.__v)}})}function fn(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ze(t)?t.map(fn):oe({},t)}function Yn(t,e,n,r,s,o,i,c,l){var f,u,a,h,d,p,y,b=n.props,w=e.props,g=e.type;if(g=="svg"?s="http://www.w3.org/2000/svg":g=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(f=0;f<o.length;f++)if((d=o[f])&&"setAttribute"in d==!!g&&(g?d.localName==g:d.nodeType==3)){t=d,o[f]=null;break}}if(t==null){if(g==null)return document.createTextNode(w);t=document.createElementNS(s,g,w.is&&w),c&&(z.__m&&z.__m(e,o),c=!1),o=null}if(g==null)b===w||c&&t.data==w||(t.data=w);else{if(o=o&&Re.call(t.childNodes),b=n.props||Ae,!c&&o!=null)for(b={},f=0;f<t.attributes.length;f++)b[(d=t.attributes[f]).name]=d.value;for(f in b)if(d=b[f],f!="children"){if(f=="dangerouslySetInnerHTML")a=d;else if(!(f in w)){if(f=="value"&&"defaultValue"in w||f=="checked"&&"defaultChecked"in w)continue;Be(t,f,null,d,s)}}for(f in w)d=w[f],f=="children"?h=d:f=="dangerouslySetInnerHTML"?u=d:f=="value"?p=d:f=="checked"?y=d:c&&typeof d!="function"||b[f]===d||Be(t,f,d,b[f],s);if(u)c||a&&(u.__html==a.__html||u.__html==t.innerHTML)||(t.innerHTML=u.__html),e.__k=[];else if(a&&(t.innerHTML=""),cn(e.type=="template"?t.content:t,ze(h)?h:[h],e,n,r,g=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,i,o?o[0]:n.__k&&ge(n,0),c,l),o!=null)for(f=o.length;f--;)dt(o[f]);c||(f="value",g=="progress"&&p==null?t.removeAttribute("value"):p!=null&&(p!==t[f]||g=="progress"&&!p||g=="option"&&p!=b[f])&&Be(t,f,p,b[f],s),f="checked",y!=null&&y!=t[f]&&Be(t,f,y,b[f],s))}return t}function _t(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(s){z.__e(s,n)}}function un(t,e,n){var r,s;if(z.unmount&&z.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||_t(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){z.__e(o,e)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&un(r[s],e,n||typeof t.type!="function");n||dt(t.__e),t.__c=t.__=t.__e=void 0}function Zn(t,e,n){return this.constructor(t,n)}function Jn(t,e,n){var r,s,o,i;e==document&&(e=document.documentElement),z.__&&z.__(t,e),s=(r=!1)?null:e.__k,o=[],i=[],pt(e,t=e.__k=Xn(je,null,[t]),s||Ae,Ae,e.namespaceURI,s?null:e.firstChild?Re.call(e.childNodes):null,o,s?s.__e:e.firstChild,r,i),ln(o,t,i)}Re=on.slice,z={__e:function(t,e,n,r){for(var s,o,i;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(t)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(t,r||{}),i=s.__d),i)return s.__E=s}catch(c){t=c}throw t}},en=0,Ie.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=oe({},this.state),typeof t=="function"&&(t=t(oe({},n),this.props)),t&&oe(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Et(this))},Ie.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Et(this))},Ie.prototype.render=je,ue=[],tn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,nn=function(t,e){return t.__v.__b-e.__v.__b},He.__r=0,rn=/(PointerCapture)$|Capture$/i,ht=0,Qe=Ut(!1),et=Ut(!0);var Qn=0;function M(t,e,n,r,s,o){e||(e={});var i,c,l=e;if("ref"in l)for(c in l={},e)c=="ref"?i=e[c]:l[c]=e[c];var f={type:t,props:l,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qn,__i:-1,__u:0,__source:s,__self:o};if(typeof t=="function"&&(i=t.defaultProps))for(c in i)l[c]===void 0&&(l[c]=i[c]);return z.vnode&&z.vnode(f),f}var Fe,W,Ve,kt,Me=0,hn=[],V=z,Bt=V.__b,Lt=V.__r,Ct=V.diffed,St=V.__c,$t=V.unmount,It=V.__;function dn(t,e){V.__h&&V.__h(W,t,Me||e),Me=0;var n=W.__H||(W.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function J(t){return Me=1,er(pn,t)}function er(t,e,n){var r=dn(Fe++,2);if(r.t=t,!r.__c&&(r.__=[pn(void 0,e),function(c){var l=r.__N?r.__N[0]:r.__[0],f=r.t(l,c);l!==f&&(r.__N=[f,r.__[1]],r.__c.setState({}))}],r.__c=W,!W.__f)){var s=function(c,l,f){if(!r.__c.__H)return!0;var u=r.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!o||o.call(this,c,l,f);var a=r.__c.props!==c;return u.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(a=!0)}}),o&&o.call(this,c,l,f)||a};W.__f=!0;var o=W.shouldComponentUpdate,i=W.componentWillUpdate;W.componentWillUpdate=function(c,l,f){if(this.__e){var u=o;o=void 0,s(c,l,f),o=u}i&&i.call(this,c,l,f)},W.shouldComponentUpdate=s}return r.__N||r.__}function tr(t,e){var n=dn(Fe++,7);return sr(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function nr(t,e){return Me=8,tr(function(){return t},e)}function rr(){for(var t;t=hn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ne),t.__H.__h.forEach(tt),t.__H.__h=[]}catch(e){t.__H.__h=[],V.__e(e,t.__v)}}V.__b=function(t){W=null,Bt&&Bt(t)},V.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),It&&It(t,e)},V.__r=function(t){Lt&&Lt(t),Fe=0;var e=(W=t.__c).__H;e&&(Ve===W?(e.__h=[],W.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Ne),e.__h.forEach(tt),e.__h=[],Fe=0)),Ve=W},V.diffed=function(t){Ct&&Ct(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(hn.push(e)!==1&&kt===V.requestAnimationFrame||((kt=V.requestAnimationFrame)||or)(rr)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),Ve=W=null},V.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ne),n.__h=n.__h.filter(function(r){return!r.__||tt(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],V.__e(r,n.__v)}}),St&&St(t,e)},V.unmount=function(t){$t&&$t(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ne(r)}catch(s){e=s}}),n.__H=void 0,e&&V.__e(e,n.__v))};var Nt=typeof requestAnimationFrame=="function";function or(t){var e,n=function(){clearTimeout(r),Nt&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,100);Nt&&(e=requestAnimationFrame(n))}function Ne(t){var e=W,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),W=e}function tt(t){var e=W;t.__c=t.__(),W=e}function sr(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}function pn(t,e){return typeof e=="function"?e(t):e}function Z(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ir(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function yt(t,...e){if(!ir(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function We(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Z(t.outputLen),Z(t.blockLen)}function Oe(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function cr(t,e){yt(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}const pe=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Xe(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function Te(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function te(t,e){return t<<32-e|t>>>e}function K(t,e){return t<<e|t>>>32-e>>>0}const Tt=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function ar(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}function Pt(t){for(let e=0;e<t.length;e++)t[e]=ar(t[e])}function lr(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function he(t){return typeof t=="string"&&(t=lr(t)),yt(t),t}class _n{clone(){return this._cloneInto()}}function yn(t,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}function fr(t){const e=r=>t().update(he(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function Ue(t=32){if(pe&&typeof pe.getRandomValues=="function")return pe.getRandomValues(new Uint8Array(t));if(pe&&typeof pe.randomBytes=="function")return pe.randomBytes(t);throw new Error("crypto.getRandomValues must be defined")}class gn extends _n{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,We(e);const r=he(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return Oe(this),this.iHash.update(e),this}digestInto(e){Oe(this),yt(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=n._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const me=(t,e,n)=>new gn(t,e).update(n).digest();me.create=(t,e)=>new gn(t,e);function ur(t,e,n){return We(t),n===void 0&&(n=new Uint8Array(t.outputLen)),me(t,he(n),he(e))}const Ge=new Uint8Array([0]),Ht=new Uint8Array;function hr(t,e,n,r=32){if(We(t),Z(r),r>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");const s=Math.ceil(r/t.outputLen);n===void 0&&(n=Ht);const o=new Uint8Array(s*t.outputLen),i=me.create(t,e),c=i._cloneInto(),l=new Uint8Array(i.outputLen);for(let f=0;f<s;f++)Ge[0]=f+1,c.update(f===0?Ht:l).update(n).update(Ge).digestInto(l),o.set(l,t.outputLen*f),i._cloneInto(c);return i.destroy(),c.destroy(),l.fill(0),Ge.fill(0),o.slice(0,r)}const we=(t,e,n,r,s)=>hr(t,ur(t,e,n),r,s);function dr(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),l=r?4:0,f=r?0:4;t.setUint32(e+l,i,r),t.setUint32(e+f,c,r)}function pr(t,e,n){return t&e^~t&n}function _r(t,e,n){return t&e^t&n^e&n}class yr extends _n{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Te(this.buffer)}update(e){Oe(this);const{view:n,buffer:r,blockLen:s}=this;e=he(e);const o=e.length;for(let i=0;i<o;){const c=Math.min(s-this.pos,o-i);if(c===s){const l=Te(e);for(;s<=o-i;i+=s)this.process(l,i);continue}r.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Oe(this),cr(e,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(r,0),i=0);for(let a=i;a<s;a++)n[a]=0;dr(r,s-8,BigInt(this.length*8),o),this.process(r,0);const c=Te(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=l/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let a=0;a<f;a++)c.setUint32(4*a,u[a],o)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:c}=this;return e.length=s,e.pos=c,e.finished=o,e.destroyed=i,s%n&&e.buffer.set(r),e}}const gr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ce=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),ae=new Uint32Array(64);class wr extends yr{constructor(){super(64,32,8,!1),this.A=ce[0]|0,this.B=ce[1]|0,this.C=ce[2]|0,this.D=ce[3]|0,this.E=ce[4]|0,this.F=ce[5]|0,this.G=ce[6]|0,this.H=ce[7]|0}get(){const{A:e,B:n,C:r,D:s,E:o,F:i,G:c,H:l}=this;return[e,n,r,s,o,i,c,l]}set(e,n,r,s,o,i,c,l){this.A=e|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=l|0}process(e,n){for(let a=0;a<16;a++,n+=4)ae[a]=e.getUint32(n,!1);for(let a=16;a<64;a++){const h=ae[a-15],d=ae[a-2],p=te(h,7)^te(h,18)^h>>>3,y=te(d,17)^te(d,19)^d>>>10;ae[a]=y+ae[a-7]+p+ae[a-16]|0}let{A:r,B:s,C:o,D:i,E:c,F:l,G:f,H:u}=this;for(let a=0;a<64;a++){const h=te(c,6)^te(c,11)^te(c,25),d=u+h+pr(c,l,f)+gr[a]+ae[a]|0,y=(te(r,2)^te(r,13)^te(r,22))+_r(r,s,o)|0;u=f,f=l,l=c,c=i+d|0,i=o,o=s,s=r,r=d+y|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,l=l+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(r,s,o,i,c,l,f,u)}roundClean(){ae.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const ne=fr(()=>new wr);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function wn(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function bn(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function br(t){if(typeof t!="function")throw new Error("function expected");return!0}function ke(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function xn(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function nt(t){if(!Array.isArray(t))throw new Error("array expected")}function mn(t,e){if(!bn(!0,e))throw new Error(`${t}: array of strings expected`)}function vn(t,e){if(!bn(!1,e))throw new Error(`${t}: array of numbers expected`)}function En(...t){const e=o=>o,n=(o,i)=>c=>o(i(c)),r=t.map(o=>o.encode).reduceRight(n,e),s=t.map(o=>o.decode).reduce(n,e);return{encode:r,decode:s}}function An(t){const e=typeof t=="string"?t.split(""):t,n=e.length;mn("alphabet",e);const r=new Map(e.map((s,o)=>[s,o]));return{encode:s=>(nt(s),s.map(o=>{if(!Number.isSafeInteger(o)||o<0||o>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${o}". Allowed: ${t}`);return e[o]})),decode:s=>(nt(s),s.map(o=>{ke("alphabet.decode",o);const i=r.get(o);if(i===void 0)throw new Error(`Unknown letter: "${o}". Allowed: ${t}`);return i}))}}function Un(t=""){return ke("join",t),{encode:e=>(mn("join.decode",e),e.join(t)),decode:e=>(ke("join.decode",e),e.split(t))}}const kn=(t,e)=>e===0?t:kn(e,t%e),Ke=(t,e)=>t+(e-kn(t,e)),Pe=(()=>{let t=[];for(let e=0;e<40;e++)t.push(2**e);return t})();function rt(t,e,n,r){if(nt(t),e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(Ke(e,n)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${n} carryBits=${Ke(e,n)}`);let s=0,o=0;const i=Pe[e],c=Pe[n]-1,l=[];for(const f of t){if(xn(f),f>=i)throw new Error(`convertRadix2: invalid data word=${f} from=${e}`);if(s=s<<e|f,o+e>32)throw new Error(`convertRadix2: carry overflow pos=${o} from=${e}`);for(o+=e;o>=n;o-=n)l.push((s>>o-n&c)>>>0);const u=Pe[o];if(u===void 0)throw new Error("invalid carry");s&=u-1}if(s=s<<n-o&c,!r&&o>=e)throw new Error("Excess padding");if(!r&&s>0)throw new Error(`Non-zero padding: ${s}`);return r&&o>0&&l.push(s>>>0),l}function Bn(t,e=!1){if(xn(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Ke(8,t)>32||Ke(t,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!wn(n))throw new Error("radix2.encode input should be Uint8Array");return rt(Array.from(n),8,t,!e)},decode:n=>(vn("radix2.decode",n),Uint8Array.from(rt(n,t,8,e)))}}function Ft(t){return br(t),function(...e){try{return t.apply(null,e)}catch{}}}const fe=En(Bn(6),An("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Un("")),ot=En(An("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Un("")),Mt=[996825010,642813549,513874426,1027748829,705979059];function ve(t){const e=t>>25;let n=(t&33554431)<<5;for(let r=0;r<Mt.length;r++)(e>>r&1)===1&&(n^=Mt[r]);return n}function Ot(t,e,n=1){const r=t.length;let s=1;for(let o=0;o<r;o++){const i=t.charCodeAt(o);if(i<33||i>126)throw new Error(`Invalid prefix (${t})`);s=ve(s)^i>>5}s=ve(s);for(let o=0;o<r;o++)s=ve(s)^t.charCodeAt(o)&31;for(let o of e)s=ve(s)^o;for(let o=0;o<6;o++)s=ve(s);return s^=n,ot.encode(rt([s%Pe[30]],30,5,!1))}function xr(t){const e=t==="bech32"?1:734539939,n=Bn(5),r=n.decode,s=n.encode,o=Ft(r);function i(a,h,d=90){ke("bech32.encode prefix",a),wn(h)&&(h=Array.from(h)),vn("bech32.encode",h);const p=a.length;if(p===0)throw new TypeError(`Invalid prefix length ${p}`);const y=p+7+h.length;if(d!==!1&&y>d)throw new TypeError(`Length ${y} exceeds limit ${d}`);const b=a.toLowerCase(),w=Ot(b,h,e);return`${b}1${ot.encode(h)}${w}`}function c(a,h=90){ke("bech32.decode input",a);const d=a.length;if(d<8||h!==!1&&d>h)throw new TypeError(`invalid string length: ${d} (${a}). Expected (8..${h})`);const p=a.toLowerCase();if(a!==p&&a!==a.toUpperCase())throw new Error("String must be lowercase or uppercase");const y=p.lastIndexOf("1");if(y===0||y===-1)throw new Error('Letter "1" must be present between prefix and data only');const b=p.slice(0,y),w=p.slice(y+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");const g=ot.decode(w).slice(0,-6),k=Ot(b,g,e);if(!w.endsWith(k))throw new Error(`Invalid checksum in ${a}: expected "${k}"`);return{prefix:b,words:g}}const l=Ft(c);function f(a){const{prefix:h,words:d}=c(a,!1);return{prefix:h,words:d,bytes:r(d)}}function u(a,h){return i(a,s(h))}return{encode:i,decode:c,encodeFromBytes:u,decodeToBytes:f,decodeUnsafe:l,fromWords:r,fromWordsUnsafe:o,toWords:s}}const Ln=xr("bech32");function mr(t,e,n,r){We(t);const s=yn({dkLen:32,asyncTick:10},r),{c:o,dkLen:i,asyncTick:c}=s;if(Z(o),Z(i),Z(c),o<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=he(e),f=he(n),u=new Uint8Array(i),a=me.create(t,l),h=a._cloneInto().update(f);return{c:o,dkLen:i,asyncTick:c,DK:u,PRF:a,PRFSalt:h}}function vr(t,e,n,r,s){return t.destroy(),e.destroy(),r&&r.destroy(),s.fill(0),n}function Cn(t,e,n,r){const{c:s,dkLen:o,DK:i,PRF:c,PRFSalt:l}=mr(t,e,n,r);let f;const u=new Uint8Array(4),a=Te(u),h=new Uint8Array(c.outputLen);for(let d=1,p=0;p<o;d++,p+=c.outputLen){const y=i.subarray(p,p+c.outputLen);a.setInt32(0,d,!1),(f=l._cloneInto(f)).update(u).digestInto(h),y.set(h.subarray(0,y.length));for(let b=1;b<s;b++){c._cloneInto(f).update(h).digestInto(h);for(let w=0;w<y.length;w++)y[w]^=h[w]}}return vr(c,l,i,f,h)}function Kt(t,e,n,r,s,o){let i=t[e++]^n[r++],c=t[e++]^n[r++],l=t[e++]^n[r++],f=t[e++]^n[r++],u=t[e++]^n[r++],a=t[e++]^n[r++],h=t[e++]^n[r++],d=t[e++]^n[r++],p=t[e++]^n[r++],y=t[e++]^n[r++],b=t[e++]^n[r++],w=t[e++]^n[r++],g=t[e++]^n[r++],k=t[e++]^n[r++],L=t[e++]^n[r++],R=t[e++]^n[r++],E=i,S=c,C=l,A=f,U=u,v=a,B=h,$=d,P=p,I=y,N=b,T=w,H=g,x=k,F=L,_=R;for(let m=0;m<8;m+=2)U^=K(E+H|0,7),P^=K(U+E|0,9),H^=K(P+U|0,13),E^=K(H+P|0,18),I^=K(v+S|0,7),x^=K(I+v|0,9),S^=K(x+I|0,13),v^=K(S+x|0,18),F^=K(N+B|0,7),C^=K(F+N|0,9),B^=K(C+F|0,13),N^=K(B+C|0,18),A^=K(_+T|0,7),$^=K(A+_|0,9),T^=K($+A|0,13),_^=K(T+$|0,18),S^=K(E+A|0,7),C^=K(S+E|0,9),A^=K(C+S|0,13),E^=K(A+C|0,18),B^=K(v+U|0,7),$^=K(B+v|0,9),U^=K($+B|0,13),v^=K(U+$|0,18),T^=K(N+I|0,7),P^=K(T+N|0,9),I^=K(P+T|0,13),N^=K(I+P|0,18),H^=K(_+F|0,7),x^=K(H+_|0,9),F^=K(x+H|0,13),_^=K(F+x|0,18);s[o++]=i+E|0,s[o++]=c+S|0,s[o++]=l+C|0,s[o++]=f+A|0,s[o++]=u+U|0,s[o++]=a+v|0,s[o++]=h+B|0,s[o++]=d+$|0,s[o++]=p+P|0,s[o++]=y+I|0,s[o++]=b+N|0,s[o++]=w+T|0,s[o++]=g+H|0,s[o++]=k+x|0,s[o++]=L+F|0,s[o++]=R+_|0}function qe(t,e,n,r,s){let o=r+0,i=r+16*s;for(let c=0;c<16;c++)n[i+c]=t[e+(2*s-1)*16+c];for(let c=0;c<s;c++,o+=16,e+=16)Kt(n,i,t,e,n,o),c>0&&(i+=16),Kt(n,o,t,e+=16,n,i)}function Er(t,e,n){const r=yn({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:s,r:o,p:i,dkLen:c,asyncTick:l,maxmem:f,onProgress:u}=r;if(Z(s),Z(o),Z(i),Z(c),Z(l),Z(f),u!==void 0&&typeof u!="function")throw new Error("progressCb should be function");const a=128*o,h=a/4;if(s<=1||(s&s-1)!==0||s>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(i<0||i>(2**32-1)*32/a)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>(2**32-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(a*(s+i)>f)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+f);const p=Cn(ne,t,e,{c:1,dkLen:a*i}),y=Xe(p),b=Xe(new Uint8Array(a*s)),w=Xe(new Uint8Array(a));let g=()=>{};if(u){const k=2*s*i,L=Math.max(Math.floor(k/1e4),1);let R=0;g=()=>{R++,u&&(!(R%L)||R===k)&&u(R/k)}}return{N:s,r:o,p:i,dkLen:c,blockSize32:h,V:b,B32:y,B:p,tmp:w,blockMixCb:g,asyncTick:l}}function Ar(t,e,n,r,s){const o=Cn(ne,t,n,{c:1,dkLen:e});return n.fill(0),r.fill(0),s.fill(0),o}function Sn(t,e,n){const{N:r,r:s,p:o,dkLen:i,blockSize32:c,V:l,B32:f,B:u,tmp:a,blockMixCb:h}=Er(t,e,n);Tt||Pt(f);for(let d=0;d<o;d++){const p=c*d;for(let y=0;y<c;y++)l[y]=f[p+y];for(let y=0,b=0;y<r-1;y++)qe(l,b,l,b+=c,s),h();qe(l,(r-1)*c,f,p,s),h();for(let y=0;y<r;y++){const b=f[p+c-16]%r;for(let w=0;w<c;w++)a[w]=f[p+w]^l[b*c+w];qe(a,0,f,p,s),h()}}return Tt||Pt(f),Ar(t,i,u,l,a)}function Ye(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function $n(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Y(t,...e){if(!$n(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Dt(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ur(t,e){Y(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Rt(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const le=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),kr=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Br=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Br)throw new Error("Non little-endian hardware is not supported");function Lr(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function st(t){if(typeof t=="string")t=Lr(t);else if($n(t))t=it(t);else throw new Error("Uint8Array expected, got "+typeof t);return t}function Cr(t,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(t,e)}function Sr(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}const $r=(t,e)=>{function n(r,...s){if(Y(r),t.nonceLength!==void 0){const u=s[0];if(!u)throw new Error("nonce / iv required");t.varSizeNonce?Y(u):Y(u,t.nonceLength)}const o=t.tagLength;o&&s[1]!==void 0&&Y(s[1]);const i=e(r,...s),c=(u,a)=>{if(a!==void 0){if(u!==2)throw new Error("cipher output not supported");Y(a)}};let l=!1;return{encrypt(u,a){if(l)throw new Error("cannot encrypt() twice with same key + nonce");return l=!0,Y(u),c(i.encrypt.length,a),i.encrypt(u,a)},decrypt(u,a){if(Y(u),o&&u.length<o)throw new Error("invalid ciphertext length: smaller than tagLength="+o);return c(i.decrypt.length,a),i.decrypt(u,a)}}}return Object.assign(n,t),n};function zt(t,e,n=!0){if(e===void 0)return new Uint8Array(t);if(e.length!==t)throw new Error("invalid output length, expected "+t+", got: "+e.length);if(n&&!Ir(e))throw new Error("invalid output, must be aligned");return e}function jt(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),c=Number(n&o),l=4,f=0;t.setUint32(e+l,i,r),t.setUint32(e+f,c,r)}function Ir(t){return t.byteOffset%4===0}function it(t){return Uint8Array.from(t)}function be(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const In=t=>Uint8Array.from(t.split("").map(e=>e.charCodeAt(0))),Nr=In("expand 16-byte k"),Tr=In("expand 32-byte k"),Pr=le(Nr),Hr=le(Tr);function D(t,e){return t<<e|t>>>32-e}function ct(t){return t.byteOffset%4===0}const Le=64,Fr=16,Nn=2**32-1,Wt=new Uint32Array;function Mr(t,e,n,r,s,o,i,c){const l=s.length,f=new Uint8Array(Le),u=le(f),a=ct(s)&&ct(o),h=a?le(s):Wt,d=a?le(o):Wt;for(let p=0;p<l;i++){if(t(e,n,r,u,i,c),i>=Nn)throw new Error("arx: counter overflow");const y=Math.min(Le,l-p);if(a&&y===Le){const b=p/4;if(p%4!==0)throw new Error("arx: invalid block position");for(let w=0,g;w<Fr;w++)g=b+w,d[g]=h[g]^u[w];p+=Le;continue}for(let b=0,w;b<y;b++)w=p+b,o[w]=s[w]^f[b];p+=y}}function Or(t,e){const{allowShortKeys:n,extendNonceFn:r,counterLength:s,counterRight:o,rounds:i}=Cr({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof t!="function")throw new Error("core must be a function");return Ye(s),Ye(i),Rt(o),Rt(n),(c,l,f,u,a=0)=>{Y(c),Y(l),Y(f);const h=f.length;if(u===void 0&&(u=new Uint8Array(h)),Y(u),Ye(a),a<0||a>=Nn)throw new Error("arx: counter overflow");if(u.length<h)throw new Error(`arx: output (${u.length}) is shorter than data (${h})`);const d=[];let p=c.length,y,b;if(p===32)d.push(y=it(c)),b=Hr;else if(p===16&&n)y=new Uint8Array(32),y.set(c),y.set(c,16),b=Pr,d.push(y);else throw new Error(`arx: invalid 32-byte key, got length=${p}`);ct(l)||d.push(l=it(l));const w=le(y);if(r){if(l.length!==24)throw new Error("arx: extended nonce must be 24 bytes");r(b,w,le(l.subarray(0,16)),w),l=l.subarray(16)}const g=16-s;if(g!==l.length)throw new Error(`arx: nonce must be ${g} or 16 bytes`);if(g!==12){const L=new Uint8Array(12);L.set(l,o?0:12-l.length),l=L,d.push(l)}const k=le(l);return Mr(t,b,w,k,f,u,a,i),be(...d),u}}const X=(t,e)=>t[e++]&255|(t[e++]&255)<<8;class Kr{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,e=st(e),Y(e,32);const n=X(e,0),r=X(e,2),s=X(e,4),o=X(e,6),i=X(e,8),c=X(e,10),l=X(e,12),f=X(e,14);this.r[0]=n&8191,this.r[1]=(n>>>13|r<<3)&8191,this.r[2]=(r>>>10|s<<6)&7939,this.r[3]=(s>>>7|o<<9)&8191,this.r[4]=(o>>>4|i<<12)&255,this.r[5]=i>>>1&8190,this.r[6]=(i>>>14|c<<2)&8191,this.r[7]=(c>>>11|l<<5)&8065,this.r[8]=(l>>>8|f<<8)&8191,this.r[9]=f>>>5&127;for(let u=0;u<8;u++)this.pad[u]=X(e,16+2*u)}process(e,n,r=!1){const s=r?0:2048,{h:o,r:i}=this,c=i[0],l=i[1],f=i[2],u=i[3],a=i[4],h=i[5],d=i[6],p=i[7],y=i[8],b=i[9],w=X(e,n+0),g=X(e,n+2),k=X(e,n+4),L=X(e,n+6),R=X(e,n+8),E=X(e,n+10),S=X(e,n+12),C=X(e,n+14);let A=o[0]+(w&8191),U=o[1]+((w>>>13|g<<3)&8191),v=o[2]+((g>>>10|k<<6)&8191),B=o[3]+((k>>>7|L<<9)&8191),$=o[4]+((L>>>4|R<<12)&8191),P=o[5]+(R>>>1&8191),I=o[6]+((R>>>14|E<<2)&8191),N=o[7]+((E>>>11|S<<5)&8191),T=o[8]+((S>>>8|C<<8)&8191),H=o[9]+(C>>>5|s),x=0,F=x+A*c+U*(5*b)+v*(5*y)+B*(5*p)+$*(5*d);x=F>>>13,F&=8191,F+=P*(5*h)+I*(5*a)+N*(5*u)+T*(5*f)+H*(5*l),x+=F>>>13,F&=8191;let _=x+A*l+U*c+v*(5*b)+B*(5*y)+$*(5*p);x=_>>>13,_&=8191,_+=P*(5*d)+I*(5*h)+N*(5*a)+T*(5*u)+H*(5*f),x+=_>>>13,_&=8191;let m=x+A*f+U*l+v*c+B*(5*b)+$*(5*y);x=m>>>13,m&=8191,m+=P*(5*p)+I*(5*d)+N*(5*h)+T*(5*a)+H*(5*u),x+=m>>>13,m&=8191;let O=x+A*u+U*f+v*l+B*c+$*(5*b);x=O>>>13,O&=8191,O+=P*(5*y)+I*(5*p)+N*(5*d)+T*(5*h)+H*(5*a),x+=O>>>13,O&=8191;let j=x+A*a+U*u+v*f+B*l+$*c;x=j>>>13,j&=8191,j+=P*(5*b)+I*(5*y)+N*(5*p)+T*(5*d)+H*(5*h),x+=j>>>13,j&=8191;let G=x+A*h+U*a+v*u+B*f+$*l;x=G>>>13,G&=8191,G+=P*c+I*(5*b)+N*(5*y)+T*(5*p)+H*(5*d),x+=G>>>13,G&=8191;let ee=x+A*d+U*h+v*a+B*u+$*f;x=ee>>>13,ee&=8191,ee+=P*l+I*c+N*(5*b)+T*(5*y)+H*(5*p),x+=ee>>>13,ee&=8191;let se=x+A*p+U*d+v*h+B*a+$*u;x=se>>>13,se&=8191,se+=P*f+I*l+N*c+T*(5*b)+H*(5*y),x+=se>>>13,se&=8191;let ie=x+A*y+U*p+v*d+B*h+$*a;x=ie>>>13,ie&=8191,ie+=P*u+I*f+N*l+T*c+H*(5*b),x+=ie>>>13,ie&=8191;let de=x+A*b+U*y+v*p+B*d+$*h;x=de>>>13,de&=8191,de+=P*a+I*u+N*f+T*l+H*c,x+=de>>>13,de&=8191,x=(x<<2)+x|0,x=x+F|0,F=x&8191,x=x>>>13,_+=x,o[0]=F,o[1]=_,o[2]=m,o[3]=O,o[4]=j,o[5]=G,o[6]=ee,o[7]=se,o[8]=ie,o[9]=de}finalize(){const{h:e,pad:n}=this,r=new Uint16Array(10);let s=e[1]>>>13;e[1]&=8191;for(let c=2;c<10;c++)e[c]+=s,s=e[c]>>>13,e[c]&=8191;e[0]+=s*5,s=e[0]>>>13,e[0]&=8191,e[1]+=s,s=e[1]>>>13,e[1]&=8191,e[2]+=s,r[0]=e[0]+5,s=r[0]>>>13,r[0]&=8191;for(let c=1;c<10;c++)r[c]=e[c]+s,s=r[c]>>>13,r[c]&=8191;r[9]-=8192;let o=(s^1)-1;for(let c=0;c<10;c++)r[c]&=o;o=~o;for(let c=0;c<10;c++)e[c]=e[c]&o|r[c];e[0]=(e[0]|e[1]<<13)&65535,e[1]=(e[1]>>>3|e[2]<<10)&65535,e[2]=(e[2]>>>6|e[3]<<7)&65535,e[3]=(e[3]>>>9|e[4]<<4)&65535,e[4]=(e[4]>>>12|e[5]<<1|e[6]<<14)&65535,e[5]=(e[6]>>>2|e[7]<<11)&65535,e[6]=(e[7]>>>5|e[8]<<8)&65535,e[7]=(e[8]>>>8|e[9]<<5)&65535;let i=e[0]+n[0];e[0]=i&65535;for(let c=1;c<8;c++)i=(e[c]+n[c]|0)+(i>>>16)|0,e[c]=i&65535;be(r)}update(e){Dt(this);const{buffer:n,blockLen:r}=this;e=st(e);const s=e.length;for(let o=0;o<s;){const i=Math.min(r-this.pos,s-o);if(i===r){for(;r<=s-o;o+=r)this.process(e,o);continue}n.set(e.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===r&&(this.process(n,0,!1),this.pos=0)}return this}destroy(){be(this.h,this.r,this.buffer,this.pad)}digestInto(e){Dt(this),Ur(e,this),this.finished=!0;const{buffer:n,h:r}=this;let{pos:s}=this;if(s){for(n[s++]=1;s<16;s++)n[s]=0;this.process(n,0,!0)}this.finalize();let o=0;for(let i=0;i<8;i++)e[o++]=r[i]>>>0,e[o++]=r[i]>>>8;return e}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}}function Dr(t){const e=(r,s)=>t(s).update(st(r)).digest(),n=t(new Uint8Array(32));return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Rr=Dr(t=>new Kr(t));function zr(t,e,n,r,s,o=20){let i=t[0],c=t[1],l=t[2],f=t[3],u=e[0],a=e[1],h=e[2],d=e[3],p=e[4],y=e[5],b=e[6],w=e[7],g=s,k=n[0],L=n[1],R=n[2],E=i,S=c,C=l,A=f,U=u,v=a,B=h,$=d,P=p,I=y,N=b,T=w,H=g,x=k,F=L,_=R;for(let O=0;O<o;O+=2)E=E+U|0,H=D(H^E,16),P=P+H|0,U=D(U^P,12),E=E+U|0,H=D(H^E,8),P=P+H|0,U=D(U^P,7),S=S+v|0,x=D(x^S,16),I=I+x|0,v=D(v^I,12),S=S+v|0,x=D(x^S,8),I=I+x|0,v=D(v^I,7),C=C+B|0,F=D(F^C,16),N=N+F|0,B=D(B^N,12),C=C+B|0,F=D(F^C,8),N=N+F|0,B=D(B^N,7),A=A+$|0,_=D(_^A,16),T=T+_|0,$=D($^T,12),A=A+$|0,_=D(_^A,8),T=T+_|0,$=D($^T,7),E=E+v|0,_=D(_^E,16),N=N+_|0,v=D(v^N,12),E=E+v|0,_=D(_^E,8),N=N+_|0,v=D(v^N,7),S=S+B|0,H=D(H^S,16),T=T+H|0,B=D(B^T,12),S=S+B|0,H=D(H^S,8),T=T+H|0,B=D(B^T,7),C=C+$|0,x=D(x^C,16),P=P+x|0,$=D($^P,12),C=C+$|0,x=D(x^C,8),P=P+x|0,$=D($^P,7),A=A+U|0,F=D(F^A,16),I=I+F|0,U=D(U^I,12),A=A+U|0,F=D(F^A,8),I=I+F|0,U=D(U^I,7);let m=0;r[m++]=i+E|0,r[m++]=c+S|0,r[m++]=l+C|0,r[m++]=f+A|0,r[m++]=u+U|0,r[m++]=a+v|0,r[m++]=h+B|0,r[m++]=d+$|0,r[m++]=p+P|0,r[m++]=y+I|0,r[m++]=b+N|0,r[m++]=w+T|0,r[m++]=g+H|0,r[m++]=k+x|0,r[m++]=L+F|0,r[m++]=R+_|0}const jr=Or(zr,{counterRight:!1,counterLength:4,allowShortKeys:!1}),Wr=new Uint8Array(16),Vt=(t,e)=>{t.update(e);const n=e.length%16;n&&t.update(Wr.subarray(n))},Vr=new Uint8Array(32);function Xt(t,e,n,r,s){const o=t(e,n,Vr),i=Rr.create(o);s&&Vt(i,s),Vt(i,r);const c=new Uint8Array(16),l=kr(c);jt(l,0,BigInt(s?s.length:0),!0),jt(l,8,BigInt(r.length),!0),i.update(c);const f=i.digest();return be(o,c),f}const Xr=t=>(e,n,r)=>({encrypt(o,i){const c=o.length;i=zt(c+16,i,!1),i.set(o);const l=i.subarray(0,-16);t(e,n,l,l,1);const f=Xt(t,e,n,l,r);return i.set(f,c),be(f),i},decrypt(o,i){i=zt(o.length-16,i,!1);const c=o.subarray(0,-16),l=o.subarray(-16),f=Xt(t,e,n,c,r);if(!Sr(l,f))throw new Error("invalid tag");return i.set(o.subarray(0,-16)),t(e,n,i,i,1),be(f),i}}),xe=$r({blockSize:64,nonceLength:12,tagLength:16},Xr(jr));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Tn=BigInt(0);function gt(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Pn(t){if(!gt(t))throw new Error("Uint8Array expected")}const Gr=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function qr(t){Pn(t);let e="";for(let n=0;n<t.length;n++)e+=Gr[t[n]];return e}function Yr(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?Tn:BigInt("0x"+t)}const re={_0:48,_9:57,A:65,F:70,a:97,f:102};function Gt(t){if(t>=re._0&&t<=re._9)return t-re._0;if(t>=re.A&&t<=re.F)return t-(re.A-10);if(t>=re.a&&t<=re.f)return t-(re.a-10)}function Hn(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=Gt(t.charCodeAt(o)),c=Gt(t.charCodeAt(o+1));if(i===void 0||c===void 0){const l=t[o]+t[o+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+o)}r[s]=i*16+c}return r}function qt(t){return Pn(t),Yr(qr(Uint8Array.from(t).reverse()))}function Zr(t,e){return Hn(t.toString(16).padStart(e*2,"0"))}function Jr(t,e){return Zr(t,e).reverse()}function Yt(t,e,n){let r;if(typeof e=="string")try{r=Hn(e)}catch(o){throw new Error(t+" must be hex string or Uint8Array, cause: "+o)}else if(gt(e))r=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(t+" of length "+n+" expected, got "+s);return r}const Ze=t=>typeof t=="bigint"&&Tn<=t;function Qr(t,e,n){return Ze(t)&&Ze(e)&&Ze(n)&&e<=t&&t<n}function Zt(t,e,n,r){if(!Qr(e,n,r))throw new Error("expected valid "+t+": "+n+" <= n < "+r+", got "+e)}const eo={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||gt(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function to(t,e,n={}){const r=(s,o,i)=>{const c=eo[o];if(typeof c!="function")throw new Error("invalid validator function");const l=t[s];if(!(i&&l===void 0)&&!c(l,t))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+l)};for(const[s,o]of Object.entries(e))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return t}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ye=BigInt(0),Ce=BigInt(1);function Fn(t,e){const n=t%e;return n>=ye?n:e+n}function no(t,e,n){if(e<ye)throw new Error("invalid exponent, negatives unsupported");if(n<=ye)throw new Error("invalid modulus");if(n===Ce)return ye;let r=Ce;for(;e>ye;)e&Ce&&(r=r*t%n),t=t*t%n,e>>=Ce;return r}function Q(t,e,n){let r=t;for(;e-- >ye;)r*=r,r%=n;return r}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _e=BigInt(0),Je=BigInt(1);function ro(t){return to(t,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...t})}function oo(t){const e=ro(t),{P:n}=e,r=g=>Fn(g,n),s=e.montgomeryBits,o=Math.ceil(s/8),i=e.nByteLength,c=e.adjustScalarBytes||(g=>g),l=e.powPminus2||(g=>no(g,n-BigInt(2),n));function f(g,k,L){const R=r(g*(k-L));return k=r(k-R),L=r(L+R),[k,L]}const u=(e.a-BigInt(2))/BigInt(4);function a(g,k){Zt("u",g,_e,n),Zt("scalar",k,_e,n);const L=k,R=g;let E=Je,S=_e,C=g,A=Je,U=_e,v;for(let $=BigInt(s-1);$>=_e;$--){const P=L>>$&Je;U^=P,v=f(U,E,C),E=v[0],C=v[1],v=f(U,S,A),S=v[0],A=v[1],U=P;const I=E+S,N=r(I*I),T=E-S,H=r(T*T),x=N-H,F=C+A,_=C-A,m=r(_*I),O=r(F*T),j=m+O,G=m-O;C=r(j*j),A=r(R*r(G*G)),E=r(N*H),S=r(x*(N+r(u*x)))}v=f(U,E,C),E=v[0],C=v[1],v=f(U,S,A),S=v[0],A=v[1];const B=l(S);return r(E*B)}function h(g){return Jr(r(g),o)}function d(g){const k=Yt("u coordinate",g,o);return i===32&&(k[31]&=127),qt(k)}function p(g){const k=Yt("scalar",g),L=k.length;if(L!==o&&L!==i){let R=""+o+" or "+i;throw new Error("invalid scalar, expected "+R+" bytes, got "+L)}return qt(c(k))}function y(g,k){const L=d(k),R=p(g),E=a(L,R);if(E===_e)throw new Error("invalid private or public key received");return h(E)}const b=h(e.Gu);function w(g){return y(g,b)}return{scalarMult:y,scalarMultBase:w,getSharedSecret:(g,k)=>y(g,k),getPublicKey:g=>w(g),utils:{randomPrivateKey:()=>e.randomBytes(e.nByteLength)},GuBytes:b}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const at=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const so=BigInt(1),Jt=BigInt(2),io=BigInt(3),co=BigInt(5);BigInt(8);function ao(t){const e=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),o=at,c=t*t%o*t%o,l=Q(c,Jt,o)*c%o,f=Q(l,so,o)*t%o,u=Q(f,co,o)*f%o,a=Q(u,e,o)*u%o,h=Q(a,n,o)*a%o,d=Q(h,r,o)*h%o,p=Q(d,s,o)*d%o,y=Q(p,s,o)*d%o,b=Q(y,e,o)*u%o;return{pow_p_5_8:Q(b,Jt,o)*t%o,b2:c}}function lo(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const De=oo({P:at,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:t=>{const e=at,{pow_p_5_8:n,b2:r}=ao(t);return Fn(Q(n,io,e)*r,e)},adjustScalarBytes:lo,randomBytes:Ue}),wt=!1;let Mn=!1;const On=(()=>{let t;return async()=>{if(t===void 0)try{await crypto.subtle.importKey("raw",De.GuBytes,{name:"X25519"},wt,[]),t=!0}catch{t=!1}return t}})();async function bt(t,e){if(!await On()||Mn){if(ft(t))throw new Error("CryptoKey provided but X25519 WebCrypto is not supported");return De.scalarMult(t,e)}let n;ft(t)?n=t:n=await uo(t);const r=await crypto.subtle.importKey("raw",e,{name:"X25519"},wt,[]);return new Uint8Array(await crypto.subtle.deriveBits({name:"X25519",public:r},n,256))}async function lt(t){if(!await On()||Mn){if(ft(t))throw new Error("CryptoKey provided but X25519 WebCrypto is not supported");return De.scalarMultBase(t)}return bt(t,De.GuBytes)}const fo=new Uint8Array([48,46,2,1,0,48,5,6,3,43,101,110,4,34,4,32]);async function uo(t){if(t.length!==32)throw new Error("X25519 private key must be 32 bytes");const e=new Uint8Array([...fo,...t]);return crypto.subtle.importKey("pkcs8",e,{name:"X25519"},wt,["deriveBits"])}function ft(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}class xt{constructor(e,n){q(this,"args");q(this,"body");this.args=e,this.body=n}}class ut{constructor(e){q(this,"arr");this.arr=e}toString(e){return e.forEach(n=>{if(n<32||n>136)throw Error("invalid non-ASCII byte in header")}),new TextDecoder().decode(e)}readString(e){const n=this.arr.subarray(0,e);return this.arr=this.arr.subarray(e),this.toString(n)}readLine(){const e=this.arr.indexOf(10);if(e>=0){const n=this.arr.subarray(0,e);return this.arr=this.arr.subarray(e+1),this.toString(n)}return null}rest(){return this.arr}}function ho(t){const e=new ut(t);if(e.readString(3)!=="-> ")throw Error("invalid stanza");const n=e.readLine();if(n===null)throw Error("invalid stanza");const r=n.split(" ");if(r.length<1)throw Error("invalid stanza");for(const i of r)if(i.length===0)throw Error("invalid stanza");const s=[];for(;;){const i=e.readLine();if(i===null)throw Error("invalid stanza");const c=fe.decode(i);if(c.length>48)throw Error("invalid stanza");if(s.push(c),c.length<48)break}const o=Kn(s);return[new xt(r,o),e.rest()]}function Kn(t){const e=t.reduce((s,o)=>s+o.length,0),n=new Uint8Array(e);let r=0;for(const s of t)n.set(s,r),r+=s.length;return n}function po(t){const e=new ut(t),n=e.readLine();if(n!=="age-encryption.org/v1")throw Error("invalid version "+(n??"line"));let r=e.rest();const s=[];for(;;){let o;[o,r]=ho(r),s.push(o);const i=new ut(r);if(i.readString(4)==="--- "){const c=t.subarray(0,t.length-i.rest().length-1),l=i.readLine();if(l===null)throw Error("invalid header");const f=fe.decode(l);return{stanzas:s,headerNoMAC:c,MAC:f,rest:i.rest()}}}}function Dn(t){const e=[];e.push(`age-encryption.org/v1
`);for(const n of t){e.push("-> "+n.args.join(" ")+`
`);for(let r=0;r<n.body.length;r+=48){let s=r+48;s>n.body.length&&(s=n.body.length),e.push(fe.encode(n.body.subarray(r,s))+`
`)}n.body.length%48===0&&e.push(`
`)}return e.push("---"),new TextEncoder().encode(e.join(""))}function _o(t,e){return Kn([Dn(t),new TextEncoder().encode(" "+fe.encode(e)+`
`)])}class yo{constructor(e){q(this,"recipient");const n=Ln.decodeToBytes(e);if(!e.startsWith("age1")||n.prefix.toLowerCase()!=="age"||n.bytes.length!==32)throw Error("invalid recipient");this.recipient=n.bytes}async wrapFileKey(e){const n=Ue(32),r=await lt(n),s=await bt(n,this.recipient),o=new Uint8Array(r.length+this.recipient.length);o.set(r),o.set(this.recipient,r.length);const i=we(ne,s,o,"age-encryption.org/v1/X25519",32);return[new xt(["X25519",fe.encode(r)],Rn(e,i))]}}class go{constructor(e){q(this,"identity");q(this,"recipient");if(xo(e)){this.identity=e,this.recipient=lt(e);return}const n=Ln.decodeToBytes(e);if(!e.startsWith("AGE-SECRET-KEY-1")||n.prefix.toUpperCase()!=="AGE-SECRET-KEY-"||n.bytes.length!==32)throw Error("invalid identity");this.identity=n.bytes,this.recipient=lt(n.bytes)}async unwrapFileKey(e){for(const n of e){if(n.args.length<1||n.args[0]!=="X25519")continue;if(n.args.length!==2)throw Error("invalid X25519 stanza");const r=fe.decode(n.args[1]);if(r.length!==32)throw Error("invalid X25519 stanza");const s=await bt(this.identity,r),o=await this.recipient,i=new Uint8Array(r.length+o.length);i.set(r),i.set(o,r.length);const c=we(ne,s,i,"age-encryption.org/v1/X25519",32),l=zn(n.body,c);if(l!==null)return l}return null}}class wo{constructor(e,n){q(this,"passphrase");q(this,"logN");this.passphrase=e,this.logN=n}wrapFileKey(e){const n=Ue(16),r="age-encryption.org/v1/scrypt",s=new Uint8Array(r.length+16);s.set(new TextEncoder().encode(r)),s.set(n,r.length);const o=Sn(this.passphrase,s,{N:2**this.logN,r:8,p:1,dkLen:32});return[new xt(["scrypt",fe.encode(n),this.logN.toString()],Rn(e,o))]}}class bo{constructor(e){q(this,"passphrase");this.passphrase=e}unwrapFileKey(e){for(const n of e){if(n.args.length<1||n.args[0]!=="scrypt")continue;if(e.length!==1)throw Error("scrypt recipient is not the only one in the header");if(n.args.length!==3||!/^[1-9][0-9]*$/.test(n.args[2]))throw Error("invalid scrypt stanza");const r=fe.decode(n.args[1]);if(r.length!==16)throw Error("invalid scrypt stanza");const s=Number(n.args[2]);if(s>20)throw Error("scrypt work factor is too high");const o="age-encryption.org/v1/scrypt",i=new Uint8Array(o.length+16);i.set(new TextEncoder().encode(o)),i.set(r,o.length);const c=Sn(this.passphrase,i,{N:2**s,r:8,p:1,dkLen:32}),l=zn(n.body,c);if(l!==null)return l}return null}}function Rn(t,e){const n=new Uint8Array(12);return xe(e,n).encrypt(t)}function zn(t,e){if(t.length!==32)throw Error("invalid stanza");const n=new Uint8Array(12);try{return xe(e,n).decrypt(t)}catch{return null}}function xo(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}const mt=16,Ee=64*1024,Se=Ee+mt;function mo(t,e){const n=new Uint8Array(12),r=()=>{for(let f=n.length-2;f>=0&&(n[f]++,n[f]===0);f--);},o=Math.ceil(e.length/Se)*mt,i=new Uint8Array(e.length-o);let c=i;for(;e.length>Se;){const f=xe(t,n).decrypt(e.subarray(0,Se));c.set(f),c=c.subarray(f.length),e=e.subarray(Se),r()}n[11]=1;const l=xe(t,n).decrypt(e);if(c.set(l),l.length===0&&i.length!==0)throw Error("empty final chunk");if(c.length!==l.length)throw Error("stream: internal error: didn't fill expected plaintext buffer");return i}function vo(t,e){const n=new Uint8Array(12),r=()=>{for(let f=n.length-2;f>=0&&(n[f]++,n[f]===0);f--);},o=(e.length===0?1:Math.ceil(e.length/Ee))*mt,i=new Uint8Array(e.length+o);let c=i;for(;e.length>Ee;){const f=xe(t,n).encrypt(e.subarray(0,Ee));c.set(f),c=c.subarray(f.length),e=e.subarray(Ee),r()}n[11]=1;const l=xe(t,n).encrypt(e);if(c.set(l),c.length!==l.length)throw Error("stream: internal error: didn't fill expected ciphertext buffer");return i}class Eo{constructor(){q(this,"passphrase",null);q(this,"scryptWorkFactor",18);q(this,"recipients",[])}setPassphrase(e){if(this.passphrase!==null)throw new Error("can encrypt to at most one passphrase");if(this.recipients.length!==0)throw new Error("can't encrypt to both recipients and passphrases");this.passphrase=e}setScryptWorkFactor(e){this.scryptWorkFactor=e}addRecipient(e){if(this.passphrase!==null)throw new Error("can't encrypt to both recipients and passphrases");typeof e=="string"?this.recipients.push(new yo(e)):this.recipients.push(e)}async encrypt(e){typeof e=="string"&&(e=new TextEncoder().encode(e));const n=Ue(16),r=[];let s=this.recipients;this.passphrase!==null&&(s=[new wo(this.passphrase,this.scryptWorkFactor)]);for(const h of s)r.push(...await h.wrapFileKey(n));const o=we(ne,n,void 0,"header",32),i=me(ne,o,Dn(r)),c=_o(r,i),l=Ue(16),f=we(ne,n,l,"payload",32),u=vo(f,e),a=new Uint8Array(c.length+l.length+u.length);return a.set(c),a.set(l,c.length),a.set(u,c.length+l.length),a}}class Ao{constructor(){q(this,"identities",[])}addPassphrase(e){this.identities.push(new bo(e))}addIdentity(e){typeof e=="string"||ko(e)?this.identities.push(new go(e)):this.identities.push(e)}async decrypt(e,n){const r=po(e),s=await this.unwrapFileKey(r.stanzas);if(s===null)throw Error("no identity matched any of the file's recipients");const o=we(ne,s,void 0,"header",32),i=me(ne,o,r.headerNoMAC);if(!Uo(r.MAC,i))throw Error("invalid header HMAC");const c=r.rest.subarray(0,16),l=we(ne,s,c,"payload",32),f=r.rest.subarray(16),u=mo(l,f);return n==="text"?new TextDecoder().decode(u):u}async unwrapFileKey(e){for(const n of this.identities){const r=await n.unwrapFileKey(e);if(r!==null)return r}return null}}function Uo(t,e){if(t.length!==e.length)return!1;let n=0;for(let r=0;r<t.length;r++)n|=t[r]^e[r];return n===0}function ko(t){return typeof CryptoKey<"u"&&t instanceof CryptoKey}const Bo=()=>{var x,F;const[t,e]=J(""),[n,r]=J("604800"),[s,o]=J(null),[i,c]=J(!1),[l,f]=J(null),[u,a]=J(""),[h,d]=J(""),[p,y]=J(null),[b,w]=J(null),[g,k]=J(""),[L,R]=J(!1),E=()=>{f(null),o(null)},S=_=>{const m=_.split(`
`),O=Object.fromEntries(m.map(j=>j.split(": ").map(G=>G.trim())).filter(j=>j.length===2));if(!O.url||!O.id||!O.sunset)throw new Error("Failed to parse server response. Unexpected format.");return O},C=async(_,m)=>{try{const O=new Eo;return O.setPassphrase(m),await O.encrypt(_)}catch{throw new Error("Encryption failed")}},A=async(_,m)=>{try{const O=new Uint8Array(_),j=new Ao;return j.addPassphrase(m),await j.decrypt(O,"text")}catch{throw new Error("Decryption failed")}},U=async()=>{if(!u)return f("Please enter a paste short code/URL part.");c(!0),E(),d(""),w(null),y(null);try{const _=`${window.location.origin}/${u}`,m=await fetch(_);if(!m.ok)throw new Error(`Failed to load paste (${m.status}): ${await m.text()||"Not Found or Server Error"}`);if(L){const O=await m.arrayBuffer(),j=await A(O,g);e(j)}else{const O=await m.text();e(O)}w(_),o({message:"Paste loaded successfully."})}catch(_){f(_.message),e("")}finally{c(!1)}},v=async()=>{if(!h)return f("No Paste ID available for update. Load or create a paste first.");c(!0),E();try{const _=new FormData;if(p){if(p.size>2*1024*1024)throw new Error("File size exceeds 2MB limit.");_.append("c",p)}else _.append("c",t);const m=await fetch(`${window.location.origin}/${h}`,{method:"PUT",body:_});if(!m.ok)throw new Error(`Failed to update paste (${m.status}): ${await m.text()||"Server Error"}`);o({message:await m.text()||"Paste updated successfully."}),y(null)}catch(_){f(_.message)}finally{c(!1)}},B=async()=>{if(!h)return f("No Paste ID available for deletion.");if(confirm("Are you sure you want to delete this paste? This cannot be undone.")){c(!0),E();try{const _=await fetch(`${window.location.origin}/${h}`,{method:"DELETE"});if(!_.ok)throw new Error(`Failed to delete paste (${_.status}): ${await _.text()||"Server Error"}`);o({message:await _.text()||"Paste deleted successfully."}),e(""),d(""),a(""),w(null),y(null)}catch(_){f(_.message)}finally{c(!1)}}},$=async()=>{c(!0),E();try{if(!p&&t.trim()==="")throw new Error("Content cannot be empty. Please type something or upload a file.");const _=new FormData;if(p){if(p.size>2*1024*1024)throw new Error("File size exceeds 2MB limit. Please choose a smaller file.");if(g&&L){const ee=await p.arrayBuffer(),se=new TextDecoder().decode(ee),ie=await C(se,g);_.append("c",new Blob([ie]),p.type)}else _.append("c",p)}else if(g&&L){const ee=await C(t,g);_.append("c",new Blob([ee]),"text/plain")}else _.append("c",t);n&&_.append("sunset",n);const m=await fetch(window.location.origin.toString(),{method:"POST",body:_});if(!m.ok)throw new Error(`Failed to create paste (${m.status}): ${await m.text()||"Server Error"}`);const{url:O,id:j,sunset:G}=S(await m.text());d(j),a(O.split("/").pop()||""),w(O),y(null),o({url:O,id:j,sunset:G})}catch(_){f(_.message)}finally{c(!1)}},P=nr(_=>{e(_.target.value),p&&y(null)},[p]),I=_=>{var O;const m=((O=_.target.files)==null?void 0:O[0])||null;m!=null&&m.size&&m.size>2*1024*1024?(f("File size exceeds 2MB limit."),y(null),_.target.value=""):(y(m),e(""),E())},N=()=>{var _;return(_=document.getElementById("file-upload"))==null?void 0:_.click()},T=_=>{const m=new Date(_);return isNaN(m.getTime())?_:m.toLocaleString()};return M("div",{className:"pastebin-container",children:[M("header",{className:"pastebin-header",children:[M("div",{className:"header-section load-section",children:[M("input",{type:"text",value:u,onInput:_=>a(_.target.value),placeholder:"Paste short code to load",disabled:i,className:"header-input"}),M("button",{onClick:U,disabled:i||!u,className:"header-button",children:"Load"}),b&&M("button",{onClick:async()=>{if(b)try{await navigator.clipboard.writeText(b),o({message:"URL copied to clipboard!"})}catch{f("Failed to copy URL to clipboard")}},disabled:i,className:"header-button",children:"Copy URL"}),M("input",{type:"text",value:h,onInput:_=>d(_.target.value),placeholder:"Enter Paste ID",disabled:i,className:"header-input small-input",title:"Enter the Paste ID"})]}),M("div",{className:"header-section action-section",children:[M("button",{onClick:$,disabled:i||!t&&!p,className:"header-button primary-action",children:i&&!s?"Creating...":"Create"}),M("button",{onClick:v,disabled:i||!h,className:"header-button",children:i&&((x=s==null?void 0:s.message)!=null&&x.includes("update"))?"Updating...":"Update"}),M("button",{onClick:B,disabled:i||!h,className:"header-button danger-action",children:i&&((F=s==null?void 0:s.message)!=null&&F.includes("delete"))?"Deleting...":"Delete"})]}),M("div",{className:"header-section options-section",children:[M("label",{htmlFor:"sunset-select",children:"Expires in:"}),M("select",{id:"sunset-select",value:n,onChange:_=>r(_.target.value),disabled:i,className:"header-select",children:[M("option",{value:"3600",children:"1 hour"}),M("option",{value:"86400",children:"1 day"}),M("option",{value:"604800",children:"1 week"}),M("option",{value:"2592000",children:"1 month"})]}),M("input",{type:"file",id:"file-upload",onChange:I,style:{display:"none"},accept:"*/*"}),M("button",{onClick:N,disabled:i,className:"header-button",children:p?`File: ${p.name}`:"Upload File (Max 2MB)"})]}),M("div",{className:"header-section encryption-section",children:[M("label",{children:[M("input",{type:"checkbox",checked:L,onChange:_=>R(_.target.checked)})," Encrypt"]}),L&&M("input",{type:"password",value:g,onChange:_=>k(_.target.value),placeholder:"Enter encryption password",className:"header-input"})]}),M("div",{className:"header-section status-section",children:[i&&M("span",{className:"status loading",children:"Working..."}),l&&M("span",{className:"status error",children:["Error: ",l]}),(s==null?void 0:s.message)&&M("span",{className:"status success",children:s.message}),s&&"url"in s&&M("span",{className:"status info",children:["URL: ",M("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:s.url})," | ID: ",s.id," | Expires: ",T(s.sunset)]}),b&&!s&&M("span",{className:"status info",children:["Loaded: ",b," ",h?`(ID: ${h})`:"(ID unknown)"]})]})]}),M("main",{className:"pastebin-editor-area",children:M("textarea",{className:"pastebin-textarea",value:t,onInput:P,placeholder:"Enter your text here, or use 'Upload File'...",required:!p,disabled:i,spellcheck:!1})})]})};function Lo(){return M(Bo,{})}const Qt=document.getElementById("app");Qt&&Jn(M(Lo,{}),Qt);
